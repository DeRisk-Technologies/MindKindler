(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8365],{5225:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(14294).A)("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]])},15894:(e,s,t)=>{"use strict";t.d(s,{dj:()=>o});var a=t(12115);let n=0,i=new Map,r=e=>{if(i.has(e))return;let s=setTimeout(()=>{i.delete(e),c({type:"REMOVE_TOAST",toastId:e})},1e6);i.set(e,s)},l=[],d={toasts:[]};function c(e){d=((e,s)=>{switch(s.type){case"ADD_TOAST":return{...e,toasts:[s.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===s.toast.id?{...e,...s.toast}:e)};case"DISMISS_TOAST":{let{toastId:t}=s;return t?r(t):e.toasts.forEach(e=>{r(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===t||void 0===t?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===s.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==s.toastId)}}})(d,e),l.forEach(e=>{e(d)})}function h(e){let{...s}=e,t=(n=(n+1)%Number.MAX_SAFE_INTEGER).toString(),a=()=>c({type:"DISMISS_TOAST",toastId:t});return c({type:"ADD_TOAST",toast:{...s,id:t,open:!0,onOpenChange:e=>{e||a()}}}),{id:t,dismiss:a,update:e=>c({type:"UPDATE_TOAST",toast:{...e,id:t}})}}function o(){let[e,s]=a.useState(d);return a.useEffect(()=>(l.push(s),()=>{let e=l.indexOf(s);e>-1&&l.splice(e,1)}),[e]),{...e,toast:h,dismiss:e=>c({type:"DISMISS_TOAST",toastId:e})}}},20063:(e,s,t)=>{"use strict";var a=t(47260);t.o(a,"useParams")&&t.d(s,{useParams:function(){return a.useParams}}),t.o(a,"usePathname")&&t.d(s,{usePathname:function(){return a.usePathname}}),t.o(a,"useRouter")&&t.d(s,{useRouter:function(){return a.useRouter}}),t.o(a,"useSearchParams")&&t.d(s,{useSearchParams:function(){return a.useSearchParams}})},32265:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(14294).A)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},60542:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>T});var a=t(95155),n=t(12115),i=t(20063),r=t(60796),l=t(3998),d=t(86948),c=t(87270),h=t(11647),o=t(65142),u=t(14294);let x=(0,u.A)("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);var m=t(32265),j=t(69489),p=t(5225),g=t(90109),y=t(88964);let A=(0,u.A)("CirclePlay",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polygon",{points:"10 8 16 12 10 16 10 8",key:"1cimsy"}]]);var f=t(75004),v=t(13406),k=t(51834),N=t(76444),b=t(11186),S=t(19708),w=t(14585),M=t(15894);function T(){let e=(0,i.useRouter)(),{toast:s}=(0,M.dj)(),{data:t,loading:u}=(0,r.$l)("assessment_templates","createdAt","desc"),{data:T,loading:C}=(0,r.$l)("assessment_assignments","assignedAt","desc"),[I,D]=(0,n.useState)(""),[E,_]=(0,n.useState)(!1),[O,P]=(0,n.useState)(null),[z,R]=(0,n.useState)(""),[q,H]=(0,n.useState)([]),L=async e=>{if(!e)return;let s=(0,S.query)((0,S.collection)(w.db,"students"),(0,S.limit)(5));H((await (0,S.getDocs)(s)).docs.map(e=>({id:e.id,...e.data()})))},B=async function(){var e;let s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"pending";if(!O||!z)return null;let t={templateId:O.id,targetId:z,targetType:"student",assignedBy:(null==(e=w.j2.currentUser)?void 0:e.uid)||"system",assignedAt:new Date().toISOString(),status:s,dueDate:new Date(Date.now()+6048e5).toISOString()};return(await (0,S.addDoc)((0,S.collection)(w.db,"assessment_assignments"),t)).id},Z=async()=>{_(!0);try{await B("pending"),s({title:"Assigned",description:"Assessment assigned to student."}),P(null)}catch(e){s({title:"Error",description:"Failed to assign.",variant:"destructive"})}finally{_(!1)}},$=async()=>{_(!0);try{let s=await B("in-progress");s&&e.push("/portal/assessment/".concat(s))}catch(e){s({title:"Error",description:"Failed to start assessment.",variant:"destructive"})}finally{_(!1)}},V=t.filter(e=>e.title.toLowerCase().includes(I.toLowerCase())||e.category.toLowerCase().includes(I.toLowerCase()));return(0,a.jsxs)("div",{className:"space-y-8 p-8 pt-6",children:[(0,a.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold tracking-tight text-primary",children:"Assessments"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"Manage templates and track active student evaluations."})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)(l.$,{variant:"outline",onClick:()=>e.push("/dashboard/assessments/analytics"),children:[(0,a.jsx)(x,{className:"mr-2 h-4 w-4"}),"Global Analytics"]}),(0,a.jsxs)(l.$,{onClick:()=>e.push("/dashboard/assessments/builder"),children:[(0,a.jsx)(m.A,{className:"mr-2 h-4 w-4"}),"New Template"]})]})]}),(0,a.jsxs)(v.tU,{defaultValue:"templates",className:"space-y-4",children:[(0,a.jsxs)(v.j7,{children:[(0,a.jsx)(v.Xi,{value:"templates",children:"Templates"}),(0,a.jsx)(v.Xi,{value:"active",children:"Active Assessments"})]}),(0,a.jsxs)(v.av,{value:"templates",className:"space-y-4",children:[(0,a.jsxs)("div",{className:"grid gap-4 md:grid-cols-3",children:[(0,a.jsxs)(d.Zp,{className:"bg-gradient-to-br from-indigo-50 to-white dark:from-indigo-950 dark:to-background border-indigo-200 dark:border-indigo-800",children:[(0,a.jsxs)(d.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(d.ZB,{className:"text-sm font-medium",children:"AI Generator"}),(0,a.jsx)(j.A,{className:"h-4 w-4 text-indigo-600"})]}),(0,a.jsxs)(d.Wu,{children:[(0,a.jsx)("div",{className:"text-2xl font-bold",children:"Quick Create"}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground mb-4",children:"Generate questions from a topic description using AI."}),(0,a.jsx)(l.$,{size:"sm",className:"w-full bg-indigo-600 hover:bg-indigo-700",onClick:()=>e.push("/dashboard/assessments/builder?mode=ai"),children:"Start Generator"})]})]}),(0,a.jsxs)(d.Zp,{children:[(0,a.jsxs)(d.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(d.ZB,{className:"text-sm font-medium",children:"Library Size"}),(0,a.jsx)(p.A,{className:"h-4 w-4 text-muted-foreground"})]}),(0,a.jsxs)(d.Wu,{children:[(0,a.jsx)("div",{className:"text-2xl font-bold",children:t.length}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"Templates available"})]})]})]}),(0,a.jsx)("div",{className:"flex items-center justify-between",children:(0,a.jsxs)("div",{className:"relative w-72",children:[(0,a.jsx)(g.A,{className:"absolute left-2 top-2.5 h-4 w-4 text-muted-foreground"}),(0,a.jsx)(o.p,{placeholder:"Search templates...",className:"pl-8",value:I,onChange:e=>D(e.target.value)})]})}),(0,a.jsxs)(d.Zp,{children:[(0,a.jsxs)(d.aR,{children:[(0,a.jsx)(d.ZB,{children:"Template Library"}),(0,a.jsx)(d.BT,{children:"Design and manage assessment forms."})]}),(0,a.jsx)(d.Wu,{children:(0,a.jsxs)(c.XI,{children:[(0,a.jsx)(c.A0,{children:(0,a.jsxs)(c.Hj,{children:[(0,a.jsx)(c.nd,{children:"Title"}),(0,a.jsx)(c.nd,{children:"Category"}),(0,a.jsx)(c.nd,{children:"Questions"}),(0,a.jsx)(c.nd,{children:"Status"}),(0,a.jsx)(c.nd,{children:"Created"}),(0,a.jsx)(c.nd,{className:"text-right",children:"Actions"})]})}),(0,a.jsx)(c.BF,{children:V.map(s=>{var t;return(0,a.jsxs)(c.Hj,{children:[(0,a.jsx)(c.nA,{className:"font-medium",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(p.A,{className:"h-4 w-4 text-blue-500"}),s.title]})}),(0,a.jsx)(c.nA,{children:(0,a.jsx)(h.E,{variant:"outline",children:s.category})}),(0,a.jsx)(c.nA,{children:(null==(t=s.questions)?void 0:t.length)||0}),(0,a.jsx)(c.nA,{children:(0,a.jsx)(h.E,{variant:"published"===s.status?"default":"secondary",children:s.status})}),(0,a.jsx)(c.nA,{children:s.createdAt?new Date(s.createdAt).toLocaleDateString():"-"}),(0,a.jsxs)(c.nA,{className:"text-right space-x-2",children:[(0,a.jsx)(l.$,{variant:"ghost",size:"icon",onClick:()=>e.push("/dashboard/assessments/builder/".concat(s.id)),children:(0,a.jsx)(y.A,{className:"h-4 w-4"})}),(0,a.jsxs)(k.lG,{children:[(0,a.jsx)(k.zM,{asChild:!0,children:(0,a.jsx)(l.$,{variant:"ghost",size:"icon",title:"Conduct Assessment",onClick:()=>{P(s),L("all")},children:(0,a.jsx)(A,{className:"h-4 w-4 text-green-600"})})}),(0,a.jsxs)(k.Cf,{children:[(0,a.jsxs)(k.c7,{children:[(0,a.jsx)(k.L3,{children:"Conduct Assessment"}),(0,a.jsxs)(k.rr,{children:["Run '",s.title,"' for a student."]})]}),(0,a.jsx)("div",{className:"grid gap-4 py-4",children:(0,a.jsxs)("div",{className:"grid gap-2",children:[(0,a.jsx)(N.J,{children:"Select Student"}),(0,a.jsxs)(b.l6,{onValueChange:R,children:[(0,a.jsx)(b.bq,{children:(0,a.jsx)(b.yv,{placeholder:"Search student..."})}),(0,a.jsx)(b.gC,{children:q.map(e=>(0,a.jsxs)(b.eb,{value:e.id,children:[e.firstName," ",e.lastName]},e.id))})]})]})}),(0,a.jsxs)(k.Es,{children:[(0,a.jsx)(l.$,{onClick:$,disabled:E||!z,children:"Start Now"}),(0,a.jsx)(l.$,{variant:"outline",onClick:Z,disabled:E||!z,children:"Assign for Later"})]})]})]})]})]},s.id)})})]})})]})]}),(0,a.jsx)(v.av,{value:"active",children:(0,a.jsxs)(d.Zp,{children:[(0,a.jsxs)(d.aR,{children:[(0,a.jsx)(d.ZB,{children:"Active Assessments"}),(0,a.jsx)(d.BT,{children:"Ongoing evaluations for students."})]}),(0,a.jsx)(d.Wu,{children:(0,a.jsxs)(c.XI,{children:[(0,a.jsx)(c.A0,{children:(0,a.jsxs)(c.Hj,{children:[(0,a.jsx)(c.nd,{children:"Template"}),(0,a.jsx)(c.nd,{children:"Student ID"}),(0,a.jsx)(c.nd,{children:"Assigned"}),(0,a.jsx)(c.nd,{children:"Status"}),(0,a.jsx)(c.nd,{className:"text-right",children:"Action"})]})}),(0,a.jsxs)(c.BF,{children:[T.map(s=>(0,a.jsxs)(c.Hj,{children:[(0,a.jsx)(c.nA,{className:"font-medium",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(f.A,{className:"h-4 w-4 text-orange-500"}),"Template ",s.templateId.substring(0,6),"..."]})}),(0,a.jsx)(c.nA,{children:s.targetId}),(0,a.jsx)(c.nA,{children:new Date(s.assignedAt).toLocaleDateString()}),(0,a.jsx)(c.nA,{children:(0,a.jsx)(h.E,{variant:"outline",className:"capitalize",children:s.status})}),(0,a.jsx)(c.nA,{className:"text-right",children:(0,a.jsxs)(l.$,{size:"sm",variant:"ghost",onClick:()=>e.push("/portal/assessment/".concat(s.id)),children:[(0,a.jsx)(A,{className:"h-4 w-4 mr-2"})," Continue"]})})]},s.id)),!C&&0===T.length&&(0,a.jsx)(c.Hj,{children:(0,a.jsx)(c.nA,{colSpan:5,className:"text-center py-8 text-muted-foreground",children:"No active assessments."})})]})]})})]})})]})]})}},69489:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(14294).A)("BrainCircuit",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M9 13a4.5 4.5 0 0 0 3-4",key:"10igwf"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M12 13h4",key:"1ku699"}],["path",{d:"M12 18h6a2 2 0 0 1 2 2v1",key:"105ag5"}],["path",{d:"M12 8h8",key:"1lhi5i"}],["path",{d:"M16 8V5a2 2 0 0 1 2-2",key:"u6izg6"}],["circle",{cx:"16",cy:"13",r:".5",key:"ry7gng"}],["circle",{cx:"18",cy:"3",r:".5",key:"1aiba7"}],["circle",{cx:"20",cy:"21",r:".5",key:"yhc1fs"}],["circle",{cx:"20",cy:"8",r:".5",key:"1e43v0"}]])},75004:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(14294).A)("ClipboardList",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]])},83562:(e,s,t)=>{Promise.resolve().then(t.bind(t,60542))},88964:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(14294).A)("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]])},90109:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(14294).A)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])}},e=>{e.O(0,[2992,3644,830,9308,1329,8475,7301,85,5667,7772,8441,1255,7358],()=>e(e.s=83562)),_N_E=e.O()}]);