(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9941],{10489:(e,t,a)=>{"use strict";a.d(t,{b:()=>i});var s=a(12115),r=a(88142),d=a(95155),l=s.forwardRef((e,t)=>(0,d.jsx)(r.sG.label,{...e,ref:t,onMouseDown:t=>{var a;t.target.closest("button, input, select, textarea")||(null==(a=e.onMouseDown)||a.call(e,t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));l.displayName="Label";var i=l},26541:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(14294).A)("Map",[["path",{d:"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z",key:"169xi5"}],["path",{d:"M15 5.764v15",key:"1pn4in"}],["path",{d:"M9 3.236v15",key:"1uimfh"}]])},70104:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>v});var s=a(95155),r=a(60796),d=a(3998),l=a(87270),i=a(86948),n=a(32265),c=a(92033),o=a(26541),m=a(74640),x=a(13630),h=a(65142),u=a(12115),j=a(51834),f=a(76444),p=a(15894),N=a(19708),b=a(14585);function v(){var e,t,a;let{data:v,loading:g}=(0,r.$l)("districts","name","asc"),[w,y]=(0,u.useState)(""),[A,D]=(0,u.useState)(!1),[k,R]=(0,u.useState)(!1),[T,C]=(0,u.useState)(null),{toast:S}=(0,p.dj)(),F=async e=>{e.preventDefault(),R(!0);let t=new FormData(e.currentTarget),a={name:t.get("name"),ward:t.get("ward"),lga:t.get("lga"),state:t.get("state"),updatedAt:(0,N.serverTimestamp)()};try{T?(await (0,N.updateDoc)((0,N.doc)(b.db,"districts",T),a),S({title:"Updated",description:"District record updated."})):(await (0,N.addDoc)((0,N.collection)(b.db,"districts"),{...a,createdAt:(0,N.serverTimestamp)()}),S({title:"Created",description:"New educational district added."})),D(!1),C(null)}catch(e){S({title:"Error",description:e.message,variant:"destructive"})}finally{R(!1)}},M=async e=>{confirm("Delete this district?")&&await (0,N.deleteDoc)((0,N.doc)(b.db,"districts",e))};return(0,s.jsxs)("div",{className:"space-y-8",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-3xl font-bold tracking-tight text-primary",children:"Educational Districts"}),(0,s.jsxs)("p",{className:"text-muted-foreground",children:["Manage hierarchy: State ",">"," LGA ",">"," Ward ",">"," District."]})]}),(0,s.jsxs)(j.lG,{open:A,onOpenChange:e=>{D(e),e||C(null)},children:[(0,s.jsx)(j.zM,{asChild:!0,children:(0,s.jsxs)(d.$,{children:[(0,s.jsx)(n.A,{className:"mr-2 h-4 w-4"})," Add District"]})}),(0,s.jsxs)(j.Cf,{children:[(0,s.jsxs)(j.c7,{children:[(0,s.jsx)(j.L3,{children:T?"Edit District":"Add New District"}),(0,s.jsx)(j.rr,{children:"Define the administrative area."})]}),(0,s.jsxs)("form",{onSubmit:F,className:"space-y-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(f.J,{htmlFor:"name",children:"District Name"}),(0,s.jsx)(h.p,{id:"name",name:"name",required:!0,defaultValue:T?null==(e=v.find(e=>e.id===T))?void 0:e.name:""})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(f.J,{htmlFor:"ward",children:"Ward"}),(0,s.jsx)(h.p,{id:"ward",name:"ward",required:!0,defaultValue:T?null==(t=v.find(e=>e.id===T))?void 0:t.ward:""})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(f.J,{htmlFor:"lga",children:"LGA"}),(0,s.jsx)(h.p,{id:"lga",name:"lga",required:!0,defaultValue:T?null==(a=v.find(e=>e.id===T))?void 0:a.lga:""})]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(f.J,{htmlFor:"state",children:"State"}),(0,s.jsx)(h.p,{id:"state",name:"state",defaultValue:"Lagos",required:!0})]}),(0,s.jsx)(j.Es,{children:(0,s.jsxs)(d.$,{type:"submit",disabled:k,children:[k&&(0,s.jsx)(c.A,{className:"mr-2 h-4 w-4 animate-spin"}),"Save District"]})})]})]})]})]}),(0,s.jsxs)(i.Zp,{children:[(0,s.jsx)(i.aR,{children:(0,s.jsx)(i.ZB,{children:"District Registry"})}),(0,s.jsx)(i.Wu,{children:g?(0,s.jsx)("div",{className:"flex justify-center py-8",children:(0,s.jsx)(c.A,{className:"h-8 w-8 animate-spin text-primary"})}):(0,s.jsxs)(l.XI,{children:[(0,s.jsx)(l.A0,{children:(0,s.jsxs)(l.Hj,{children:[(0,s.jsx)(l.nd,{children:"District Name"}),(0,s.jsx)(l.nd,{children:"Ward"}),(0,s.jsx)(l.nd,{children:"LGA"}),(0,s.jsx)(l.nd,{children:"State"}),(0,s.jsx)(l.nd,{className:"text-right",children:"Actions"})]})}),(0,s.jsx)(l.BF,{children:v.map(e=>(0,s.jsxs)(l.Hj,{children:[(0,s.jsxs)(l.nA,{className:"font-medium flex items-center gap-2",children:[(0,s.jsx)(o.A,{className:"h-4 w-4 text-muted-foreground"}),e.name]}),(0,s.jsx)(l.nA,{children:e.ward}),(0,s.jsx)(l.nA,{children:e.lga}),(0,s.jsx)(l.nA,{children:e.state}),(0,s.jsxs)(l.nA,{className:"text-right",children:[(0,s.jsx)(d.$,{variant:"ghost",size:"icon",onClick:()=>{C(e.id),D(!0)},children:(0,s.jsx)(m.A,{className:"h-4 w-4"})}),(0,s.jsx)(d.$,{variant:"ghost",size:"icon",onClick:()=>M(e.id),children:(0,s.jsx)(x.A,{className:"h-4 w-4 text-destructive"})})]})]},e.id))})]})})]})]})}},87270:(e,t,a)=>{"use strict";a.d(t,{A0:()=>i,BF:()=>n,Hj:()=>c,XI:()=>l,nA:()=>m,nd:()=>o});var s=a(95155),r=a(12115),d=a(64269);let l=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{className:"relative w-full overflow-auto",children:(0,s.jsx)("table",{ref:t,className:(0,d.cn)("w-full caption-bottom text-sm",a),...r})})});l.displayName="Table";let i=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("thead",{ref:t,className:(0,d.cn)("[&_tr]:border-b",a),...r})});i.displayName="TableHeader";let n=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("tbody",{ref:t,className:(0,d.cn)("[&_tr:last-child]:border-0",a),...r})});n.displayName="TableBody",r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("tfoot",{ref:t,className:(0,d.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",a),...r})}).displayName="TableFooter";let c=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("tr",{ref:t,className:(0,d.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",a),...r})});c.displayName="TableRow";let o=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("th",{ref:t,className:(0,d.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",a),...r})});o.displayName="TableHead";let m=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("td",{ref:t,className:(0,d.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",a),...r})});m.displayName="TableCell",r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("caption",{ref:t,className:(0,d.cn)("mt-4 text-sm text-muted-foreground",a),...r})}).displayName="TableCaption"},98562:(e,t,a)=>{Promise.resolve().then(a.bind(a,70104))}},e=>{e.O(0,[2992,3644,830,9308,1329,85,4098,8441,1255,7358],()=>e(e.s=98562)),_N_E=e.O()}]);