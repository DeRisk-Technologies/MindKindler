(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9941],{26541:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t=(0,a(14294).A)("Map",[["path",{d:"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z",key:"169xi5"}],["path",{d:"M15 5.764v15",key:"1pn4in"}],["path",{d:"M9 3.236v15",key:"1uimfh"}]])},70104:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>b});var t=a(95155),r=a(60796),d=a(3998),i=a(87270),l=a(86948),n=a(32265),c=a(92033),m=a(26541),h=a(74640),x=a(13630),o=a(65142),j=a(12115),u=a(51834),f=a(76444),p=a(15894),N=a(19708),g=a(14585);function b(){var e,s,a;let{data:b,loading:w}=(0,r.$l)("districts","name","asc"),[v,y]=(0,j.useState)(""),[A,D]=(0,j.useState)(!1),[k,R]=(0,j.useState)(!1),[C,S]=(0,j.useState)(null),{toast:T}=(0,p.dj)(),F=async e=>{e.preventDefault(),R(!0);let s=new FormData(e.currentTarget),a={name:s.get("name"),ward:s.get("ward"),lga:s.get("lga"),state:s.get("state"),updatedAt:(0,N.O5)()};try{C?(await (0,N.mZ)((0,N.H9)(g.db,"districts",C),a),T({title:"Updated",description:"District record updated."})):(await (0,N.gS)((0,N.rJ)(g.db,"districts"),{...a,createdAt:(0,N.O5)()}),T({title:"Created",description:"New educational district added."})),D(!1),S(null)}catch(e){T({title:"Error",description:e.message,variant:"destructive"})}finally{R(!1)}},_=async e=>{confirm("Delete this district?")&&await (0,N.kd)((0,N.H9)(g.db,"districts",e))};return(0,t.jsxs)("div",{className:"space-y-8",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-3xl font-bold tracking-tight text-primary",children:"Educational Districts"}),(0,t.jsxs)("p",{className:"text-muted-foreground",children:["Manage hierarchy: State ",">"," LGA ",">"," Ward ",">"," District."]})]}),(0,t.jsxs)(u.lG,{open:A,onOpenChange:e=>{D(e),e||S(null)},children:[(0,t.jsx)(u.zM,{asChild:!0,children:(0,t.jsxs)(d.$,{children:[(0,t.jsx)(n.A,{className:"mr-2 h-4 w-4"})," Add District"]})}),(0,t.jsxs)(u.Cf,{children:[(0,t.jsxs)(u.c7,{children:[(0,t.jsx)(u.L3,{children:C?"Edit District":"Add New District"}),(0,t.jsx)(u.rr,{children:"Define the administrative area."})]}),(0,t.jsxs)("form",{onSubmit:F,className:"space-y-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(f.J,{htmlFor:"name",children:"District Name"}),(0,t.jsx)(o.p,{id:"name",name:"name",required:!0,defaultValue:C?null==(e=b.find(e=>e.id===C))?void 0:e.name:""})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(f.J,{htmlFor:"ward",children:"Ward"}),(0,t.jsx)(o.p,{id:"ward",name:"ward",required:!0,defaultValue:C?null==(s=b.find(e=>e.id===C))?void 0:s.ward:""})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(f.J,{htmlFor:"lga",children:"LGA"}),(0,t.jsx)(o.p,{id:"lga",name:"lga",required:!0,defaultValue:C?null==(a=b.find(e=>e.id===C))?void 0:a.lga:""})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(f.J,{htmlFor:"state",children:"State"}),(0,t.jsx)(o.p,{id:"state",name:"state",defaultValue:"Lagos",required:!0})]}),(0,t.jsx)(u.Es,{children:(0,t.jsxs)(d.$,{type:"submit",disabled:k,children:[k&&(0,t.jsx)(c.A,{className:"mr-2 h-4 w-4 animate-spin"}),"Save District"]})})]})]})]})]}),(0,t.jsxs)(l.Zp,{children:[(0,t.jsx)(l.aR,{children:(0,t.jsx)(l.ZB,{children:"District Registry"})}),(0,t.jsx)(l.Wu,{children:w?(0,t.jsx)("div",{className:"flex justify-center py-8",children:(0,t.jsx)(c.A,{className:"h-8 w-8 animate-spin text-primary"})}):(0,t.jsxs)(i.XI,{children:[(0,t.jsx)(i.A0,{children:(0,t.jsxs)(i.Hj,{children:[(0,t.jsx)(i.nd,{children:"District Name"}),(0,t.jsx)(i.nd,{children:"Ward"}),(0,t.jsx)(i.nd,{children:"LGA"}),(0,t.jsx)(i.nd,{children:"State"}),(0,t.jsx)(i.nd,{className:"text-right",children:"Actions"})]})}),(0,t.jsx)(i.BF,{children:b.map(e=>(0,t.jsxs)(i.Hj,{children:[(0,t.jsxs)(i.nA,{className:"font-medium flex items-center gap-2",children:[(0,t.jsx)(m.A,{className:"h-4 w-4 text-muted-foreground"}),e.name]}),(0,t.jsx)(i.nA,{children:e.ward}),(0,t.jsx)(i.nA,{children:e.lga}),(0,t.jsx)(i.nA,{children:e.state}),(0,t.jsxs)(i.nA,{className:"text-right",children:[(0,t.jsx)(d.$,{variant:"ghost",size:"icon",onClick:()=>{S(e.id),D(!0)},children:(0,t.jsx)(h.A,{className:"h-4 w-4"})}),(0,t.jsx)(d.$,{variant:"ghost",size:"icon",onClick:()=>_(e.id),children:(0,t.jsx)(x.A,{className:"h-4 w-4 text-destructive"})})]})]},e.id))})]})})]})]})}},87270:(e,s,a)=>{"use strict";a.d(s,{A0:()=>l,BF:()=>n,Hj:()=>c,XI:()=>i,nA:()=>h,nd:()=>m});var t=a(95155),r=a(12115),d=a(64269);let i=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)("div",{className:"relative w-full overflow-auto",children:(0,t.jsx)("table",{ref:s,className:(0,d.cn)("w-full caption-bottom text-sm",a),...r})})});i.displayName="Table";let l=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)("thead",{ref:s,className:(0,d.cn)("[&_tr]:border-b",a),...r})});l.displayName="TableHeader";let n=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)("tbody",{ref:s,className:(0,d.cn)("[&_tr:last-child]:border-0",a),...r})});n.displayName="TableBody",r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)("tfoot",{ref:s,className:(0,d.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",a),...r})}).displayName="TableFooter";let c=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)("tr",{ref:s,className:(0,d.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",a),...r})});c.displayName="TableRow";let m=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)("th",{ref:s,className:(0,d.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",a),...r})});m.displayName="TableHead";let h=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)("td",{ref:s,className:(0,d.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",a),...r})});h.displayName="TableCell",r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)("caption",{ref:s,className:(0,d.cn)("mt-4 text-sm text-muted-foreground",a),...r})}).displayName="TableCaption"},98562:(e,s,a)=>{Promise.resolve().then(a.bind(a,70104))}},e=>{e.O(0,[2992,3644,3286,5936,9820,1329,85,4098,8441,1255,7358],()=>e(e.s=98562)),_N_E=e.O()}]);