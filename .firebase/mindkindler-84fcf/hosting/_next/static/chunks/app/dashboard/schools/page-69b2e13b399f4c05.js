(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4727],{11186:(e,s,a)=>{"use strict";a.d(s,{bq:()=>h,eb:()=>f,gC:()=>p,l6:()=>o,yv:()=>m});var t=a(95155),i=a(12115),l=a(95102),r=a(59007),d=a(42614),n=a(72251),c=a(64269);let o=l.bL;l.YJ;let m=l.WT,h=i.forwardRef((e,s)=>{let{className:a,children:i,...d}=e;return(0,t.jsxs)(l.l9,{ref:s,className:(0,c.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",a),...d,children:[i,(0,t.jsx)(l.In,{asChild:!0,children:(0,t.jsx)(r.A,{className:"h-4 w-4 opacity-50"})})]})});h.displayName=l.l9.displayName;let u=i.forwardRef((e,s)=>{let{className:a,...i}=e;return(0,t.jsx)(l.PP,{ref:s,className:(0,c.cn)("flex cursor-default items-center justify-center py-1",a),...i,children:(0,t.jsx)(d.A,{className:"h-4 w-4"})})});u.displayName=l.PP.displayName;let x=i.forwardRef((e,s)=>{let{className:a,...i}=e;return(0,t.jsx)(l.wn,{ref:s,className:(0,c.cn)("flex cursor-default items-center justify-center py-1",a),...i,children:(0,t.jsx)(r.A,{className:"h-4 w-4"})})});x.displayName=l.wn.displayName;let p=i.forwardRef((e,s)=>{let{className:a,children:i,position:r="popper",...d}=e;return(0,t.jsx)(l.ZL,{children:(0,t.jsxs)(l.UC,{ref:s,className:(0,c.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===r&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",a),position:r,...d,children:[(0,t.jsx)(u,{}),(0,t.jsx)(l.LM,{className:(0,c.cn)("p-1","popper"===r&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:i}),(0,t.jsx)(x,{})]})})});p.displayName=l.UC.displayName,i.forwardRef((e,s)=>{let{className:a,...i}=e;return(0,t.jsx)(l.JU,{ref:s,className:(0,c.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",a),...i})}).displayName=l.JU.displayName;let f=i.forwardRef((e,s)=>{let{className:a,children:i,...r}=e;return(0,t.jsxs)(l.q7,{ref:s,className:(0,c.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),...r,children:[(0,t.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,t.jsx)(l.VF,{children:(0,t.jsx)(n.A,{className:"h-4 w-4"})})}),(0,t.jsx)(l.p4,{children:i})]})});f.displayName=l.q7.displayName,i.forwardRef((e,s)=>{let{className:a,...i}=e;return(0,t.jsx)(l.wv,{ref:s,className:(0,c.cn)("-mx-1 my-1 h-px bg-muted",a),...i})}).displayName=l.wv.displayName},13406:(e,s,a)=>{"use strict";a.d(s,{Xi:()=>c,av:()=>o,j7:()=>n,tU:()=>d});var t=a(95155),i=a(12115),l=a(25667),r=a(64269);let d=l.bL,n=i.forwardRef((e,s)=>{let{className:a,...i}=e;return(0,t.jsx)(l.B8,{ref:s,className:(0,r.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",a),...i})});n.displayName=l.B8.displayName;let c=i.forwardRef((e,s)=>{let{className:a,...i}=e;return(0,t.jsx)(l.l9,{ref:s,className:(0,r.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",a),...i})});c.displayName=l.l9.displayName;let o=i.forwardRef((e,s)=>{let{className:a,...i}=e;return(0,t.jsx)(l.UC,{ref:s,className:(0,r.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",a),...i})});o.displayName=l.UC.displayName},26541:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t=(0,a(14294).A)("Map",[["path",{d:"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z",key:"169xi5"}],["path",{d:"M15 5.764v15",key:"1pn4in"}],["path",{d:"M9 3.236v15",key:"1uimfh"}]])},31120:(e,s,a)=>{"use strict";a.d(s,{T:()=>r});var t=a(95155),i=a(12115),l=a(64269);let r=i.forwardRef((e,s)=>{let{className:a,...i}=e;return(0,t.jsx)("textarea",{className:(0,l.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),ref:s,...i})});r.displayName="Textarea"},56177:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t=(0,a(14294).A)("School",[["path",{d:"M14 22v-4a2 2 0 1 0-4 0v4",key:"hhkicm"}],["path",{d:"m18 10 3.447 1.724a1 1 0 0 1 .553.894V20a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2v-7.382a1 1 0 0 1 .553-.894L6 10",key:"1xqip1"}],["path",{d:"M18 5v17",key:"1sw6gf"}],["path",{d:"m4 6 7.106-3.553a2 2 0 0 1 1.788 0L20 6",key:"9d2mlk"}],["path",{d:"M6 5v17",key:"1xfsm0"}],["circle",{cx:"12",cy:"9",r:"2",key:"1092wv"}]])},81394:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>k});var t=a(95155),i=a(60796),l=a(3998),r=a(87270),d=a(86948),n=a(90109),c=a(32265),o=a(92033),m=a(56177),h=a(74640),u=a(13630),x=a(26541),p=a(65142),f=a(12115),j=a(51834),N=a(76444),g=a(15894),v=a(19708),y=a(14585),b=a(31120),w=a(11186),A=a(13406);function k(){var e,s,a,k,C,S,D,E,R,F;let{data:T,loading:q}=(0,i.$l)("schools","name","asc"),{data:P,loading:L}=(0,i.$l)("districts","name","asc"),[V,J]=(0,f.useState)(""),[M,I]=(0,f.useState)(!1),[z,U]=(0,f.useState)(!1),[$,H]=(0,f.useState)(null),[_,B]=(0,f.useState)(!1),[X,O]=(0,f.useState)(null),{toast:W}=(0,g.dj)(),G=async e=>{e.preventDefault(),U(!0);let s=new FormData(e.currentTarget),a={name:s.get("name"),address:s.get("address"),districtId:s.get("districtId"),principalName:s.get("principalName"),contactEmail:s.get("contactEmail"),contactPhone:s.get("contactPhone"),type:s.get("type"),updatedAt:(0,v.serverTimestamp)()};try{$?(await (0,v.updateDoc)((0,v.doc)(y.db,"schools",$),a),W({title:"Updated",description:"School record updated."})):(await (0,v.addDoc)((0,v.collection)(y.db,"schools"),{...a,createdAt:(0,v.serverTimestamp)()}),W({title:"Enrolled",description:"New school added."})),I(!1),H(null)}catch(e){W({title:"Error",description:e.message,variant:"destructive"})}finally{U(!1)}},Z=async e=>{confirm("Are you sure?")&&await (0,v.deleteDoc)((0,v.doc)(y.db,"schools",e))},Y=e=>{var s;return(null==(s=P.find(s=>s.id===e))?void 0:s.name)||e},K=T.filter(e=>e.name.toLowerCase().includes(V.toLowerCase())||Y(e.districtId).toLowerCase().includes(V.toLowerCase())),Q=async e=>{e.preventDefault(),U(!0);let s=new FormData(e.currentTarget),a={name:s.get("name"),ward:s.get("ward"),lga:s.get("lga"),state:s.get("state"),updatedAt:(0,v.serverTimestamp)()};try{X?(await (0,v.updateDoc)((0,v.doc)(y.db,"districts",X),a),W({title:"Updated",description:"District record updated."})):(await (0,v.addDoc)((0,v.collection)(y.db,"districts"),{...a,createdAt:(0,v.serverTimestamp)()}),W({title:"Created",description:"New educational district added."})),B(!1),O(null)}catch(e){W({title:"Error",description:e.message,variant:"destructive"})}finally{U(!1)}},ee=async e=>{confirm("Delete this district?")&&await (0,v.deleteDoc)((0,v.doc)(y.db,"districts",e))};return(0,t.jsxs)("div",{className:"space-y-8",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-3xl font-bold tracking-tight text-primary",children:"Schools & Districts"}),(0,t.jsx)("p",{className:"text-muted-foreground",children:"Manage educational institutions and administrative districts."})]}),(0,t.jsxs)(A.tU,{defaultValue:"schools",className:"space-y-4",children:[(0,t.jsxs)(A.j7,{children:[(0,t.jsx)(A.Xi,{value:"schools",children:"Schools Registry"}),(0,t.jsx)(A.Xi,{value:"districts",children:"Districts Management"})]}),(0,t.jsxs)(A.av,{value:"schools",className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsxs)("div",{className:"relative w-64",children:[(0,t.jsx)(n.A,{className:"absolute left-2 top-2.5 h-4 w-4 text-muted-foreground"}),(0,t.jsx)(p.p,{placeholder:"Search schools...",className:"pl-8",value:V,onChange:e=>J(e.target.value)})]}),(0,t.jsxs)(j.lG,{open:M,onOpenChange:e=>{I(e),e||H(null)},children:[(0,t.jsx)(j.zM,{asChild:!0,children:(0,t.jsxs)(l.$,{children:[(0,t.jsx)(c.A,{className:"mr-2 h-4 w-4"})," Enroll School"]})}),(0,t.jsxs)(j.Cf,{className:"max-w-2xl",children:[(0,t.jsxs)(j.c7,{children:[(0,t.jsx)(j.L3,{children:$?"Edit School":"Enroll New School"}),(0,t.jsx)(j.rr,{children:"Add comprehensive details for the institution."})]}),(0,t.jsxs)("form",{onSubmit:G,className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"space-y-2 col-span-2",children:[(0,t.jsx)(N.J,{htmlFor:"name",children:"School Name"}),(0,t.jsx)(p.p,{id:"name",name:"name",required:!0,defaultValue:$?null==(e=T.find(e=>e.id===$))?void 0:e.name:""})]}),(0,t.jsxs)("div",{className:"space-y-2 col-span-2",children:[(0,t.jsx)(N.J,{htmlFor:"address",children:"Full Address"}),(0,t.jsx)(b.T,{id:"address",name:"address",required:!0,defaultValue:$?null==(s=T.find(e=>e.id===$))?void 0:s.address:""})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(N.J,{htmlFor:"districtId",children:"Educational District"}),(0,t.jsxs)(w.l6,{name:"districtId",required:!0,defaultValue:$?null==(a=T.find(e=>e.id===$))?void 0:a.districtId:"",children:[(0,t.jsx)(w.bq,{children:(0,t.jsx)(w.yv,{placeholder:"Select District"})}),(0,t.jsx)(w.gC,{children:P.map(e=>(0,t.jsxs)(w.eb,{value:e.id,children:[e.name," (",e.ward,")"]},e.id))})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(N.J,{htmlFor:"type",children:"School Type"}),(0,t.jsx)(p.p,{id:"type",name:"type",placeholder:"Public, Private",required:!0,defaultValue:$?null==(k=T.find(e=>e.id===$))?void 0:k.type:""})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(N.J,{htmlFor:"principalName",children:"Principal Name"}),(0,t.jsx)(p.p,{id:"principalName",name:"principalName",required:!0,defaultValue:$?null==(C=T.find(e=>e.id===$))?void 0:C.principalName:""})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(N.J,{htmlFor:"contactPhone",children:"Contact Phone"}),(0,t.jsx)(p.p,{id:"contactPhone",name:"contactPhone",required:!0,defaultValue:$?null==(S=T.find(e=>e.id===$))?void 0:S.contactPhone:""})]}),(0,t.jsxs)("div",{className:"space-y-2 col-span-2",children:[(0,t.jsx)(N.J,{htmlFor:"contactEmail",children:"Official Email"}),(0,t.jsx)(p.p,{id:"contactEmail",name:"contactEmail",type:"email",required:!0,defaultValue:$?null==(D=T.find(e=>e.id===$))?void 0:D.contactEmail:""})]}),(0,t.jsx)(j.Es,{className:"col-span-2 mt-4",children:(0,t.jsxs)(l.$,{type:"submit",disabled:z,className:"w-full",children:[z&&(0,t.jsx)(o.A,{className:"mr-2 h-4 w-4 animate-spin"}),"Save School"]})})]})]})]})]}),(0,t.jsx)(d.Zp,{children:(0,t.jsx)(d.Wu,{className:"pt-6",children:q||L?(0,t.jsx)("div",{className:"flex justify-center py-8",children:(0,t.jsx)(o.A,{className:"h-8 w-8 animate-spin text-primary"})}):(0,t.jsxs)(r.XI,{children:[(0,t.jsx)(r.A0,{children:(0,t.jsxs)(r.Hj,{children:[(0,t.jsx)(r.nd,{children:"School Name"}),(0,t.jsx)(r.nd,{children:"District"}),(0,t.jsx)(r.nd,{children:"Principal"}),(0,t.jsx)(r.nd,{children:"Contact"}),(0,t.jsx)(r.nd,{className:"text-right",children:"Actions"})]})}),(0,t.jsx)(r.BF,{children:K.map(e=>(0,t.jsxs)(r.Hj,{children:[(0,t.jsxs)(r.nA,{className:"font-medium flex items-center gap-2",children:[(0,t.jsx)(m.A,{className:"h-4 w-4 text-muted-foreground"}),e.name]}),(0,t.jsx)(r.nA,{children:Y(e.districtId)}),(0,t.jsx)(r.nA,{children:e.principalName}),(0,t.jsx)(r.nA,{children:e.contactEmail}),(0,t.jsx)(r.nA,{className:"text-right",children:(0,t.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,t.jsx)(l.$,{variant:"ghost",size:"icon",onClick:()=>{H(e.id),I(!0)},children:(0,t.jsx)(h.A,{className:"h-4 w-4"})}),(0,t.jsx)(l.$,{variant:"ghost",size:"icon",onClick:()=>Z(e.id),children:(0,t.jsx)(u.A,{className:"h-4 w-4 text-destructive"})})]})})]},e.id))})]})})})]}),(0,t.jsxs)(A.av,{value:"districts",className:"space-y-4",children:[(0,t.jsx)("div",{className:"flex justify-end",children:(0,t.jsxs)(j.lG,{open:_,onOpenChange:e=>{B(e),e||O(null)},children:[(0,t.jsx)(j.zM,{asChild:!0,children:(0,t.jsxs)(l.$,{children:[(0,t.jsx)(c.A,{className:"mr-2 h-4 w-4"})," Add District"]})}),(0,t.jsxs)(j.Cf,{children:[(0,t.jsxs)(j.c7,{children:[(0,t.jsx)(j.L3,{children:X?"Edit District":"Add New District"}),(0,t.jsx)(j.rr,{children:"Define the administrative area."})]}),(0,t.jsxs)("form",{onSubmit:Q,className:"space-y-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(N.J,{htmlFor:"name",children:"District Name"}),(0,t.jsx)(p.p,{id:"name",name:"name",required:!0,defaultValue:X?null==(E=P.find(e=>e.id===X))?void 0:E.name:""})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(N.J,{htmlFor:"ward",children:"Ward"}),(0,t.jsx)(p.p,{id:"ward",name:"ward",required:!0,defaultValue:X?null==(R=P.find(e=>e.id===X))?void 0:R.ward:""})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(N.J,{htmlFor:"lga",children:"LGA"}),(0,t.jsx)(p.p,{id:"lga",name:"lga",required:!0,defaultValue:X?null==(F=P.find(e=>e.id===X))?void 0:F.lga:""})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(N.J,{htmlFor:"state",children:"State"}),(0,t.jsx)(p.p,{id:"state",name:"state",defaultValue:"Lagos",required:!0})]}),(0,t.jsx)(j.Es,{children:(0,t.jsxs)(l.$,{type:"submit",disabled:z,children:[z&&(0,t.jsx)(o.A,{className:"mr-2 h-4 w-4 animate-spin"}),"Save District"]})})]})]})]})}),(0,t.jsx)(d.Zp,{children:(0,t.jsx)(d.Wu,{className:"pt-6",children:L?(0,t.jsx)("div",{className:"flex justify-center py-8",children:(0,t.jsx)(o.A,{className:"h-8 w-8 animate-spin text-primary"})}):(0,t.jsxs)(r.XI,{children:[(0,t.jsx)(r.A0,{children:(0,t.jsxs)(r.Hj,{children:[(0,t.jsx)(r.nd,{children:"District Name"}),(0,t.jsx)(r.nd,{children:"Ward"}),(0,t.jsx)(r.nd,{children:"LGA"}),(0,t.jsx)(r.nd,{children:"State"}),(0,t.jsx)(r.nd,{className:"text-right",children:"Actions"})]})}),(0,t.jsx)(r.BF,{children:P.map(e=>(0,t.jsxs)(r.Hj,{children:[(0,t.jsxs)(r.nA,{className:"font-medium flex items-center gap-2",children:[(0,t.jsx)(x.A,{className:"h-4 w-4 text-muted-foreground"}),e.name]}),(0,t.jsx)(r.nA,{children:e.ward}),(0,t.jsx)(r.nA,{children:e.lga}),(0,t.jsx)(r.nA,{children:e.state}),(0,t.jsx)(r.nA,{className:"text-right",children:(0,t.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,t.jsx)(l.$,{variant:"ghost",size:"icon",onClick:()=>{O(e.id),B(!0)},children:(0,t.jsx)(h.A,{className:"h-4 w-4"})}),(0,t.jsx)(l.$,{variant:"ghost",size:"icon",onClick:()=>ee(e.id),children:(0,t.jsx)(u.A,{className:"h-4 w-4 text-destructive"})})]})})]},e.id))})]})})})]})]})]})}},87270:(e,s,a)=>{"use strict";a.d(s,{A0:()=>d,BF:()=>n,Hj:()=>c,XI:()=>r,nA:()=>m,nd:()=>o});var t=a(95155),i=a(12115),l=a(64269);let r=i.forwardRef((e,s)=>{let{className:a,...i}=e;return(0,t.jsx)("div",{className:"relative w-full overflow-auto",children:(0,t.jsx)("table",{ref:s,className:(0,l.cn)("w-full caption-bottom text-sm",a),...i})})});r.displayName="Table";let d=i.forwardRef((e,s)=>{let{className:a,...i}=e;return(0,t.jsx)("thead",{ref:s,className:(0,l.cn)("[&_tr]:border-b",a),...i})});d.displayName="TableHeader";let n=i.forwardRef((e,s)=>{let{className:a,...i}=e;return(0,t.jsx)("tbody",{ref:s,className:(0,l.cn)("[&_tr:last-child]:border-0",a),...i})});n.displayName="TableBody",i.forwardRef((e,s)=>{let{className:a,...i}=e;return(0,t.jsx)("tfoot",{ref:s,className:(0,l.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",a),...i})}).displayName="TableFooter";let c=i.forwardRef((e,s)=>{let{className:a,...i}=e;return(0,t.jsx)("tr",{ref:s,className:(0,l.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",a),...i})});c.displayName="TableRow";let o=i.forwardRef((e,s)=>{let{className:a,...i}=e;return(0,t.jsx)("th",{ref:s,className:(0,l.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",a),...i})});o.displayName="TableHead";let m=i.forwardRef((e,s)=>{let{className:a,...i}=e;return(0,t.jsx)("td",{ref:s,className:(0,l.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",a),...i})});m.displayName="TableCell",i.forwardRef((e,s)=>{let{className:a,...i}=e;return(0,t.jsx)("caption",{ref:s,className:(0,l.cn)("mt-4 text-sm text-muted-foreground",a),...i})}).displayName="TableCaption"},90109:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t=(0,a(14294).A)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},99092:(e,s,a)=>{Promise.resolve().then(a.bind(a,81394))}},e=>{e.O(0,[2992,3644,830,9308,1329,8475,7301,85,5667,4098,8441,1255,7358],()=>e(e.s=99092)),_N_E=e.O()}]);