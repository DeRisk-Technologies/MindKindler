(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[922],{6943:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t=(0,a(14294).A)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]])},10829:(e,s,a)=>{Promise.resolve().then(a.bind(a,64281))},11186:(e,s,a)=>{"use strict";a.d(s,{bq:()=>x,eb:()=>p,gC:()=>f,l6:()=>o,yv:()=>m});var t=a(95155),r=a(12115),d=a(95102),l=a(59007),i=a(42614),n=a(72251),c=a(64269);let o=d.bL;d.YJ;let m=d.WT,x=r.forwardRef((e,s)=>{let{className:a,children:r,...i}=e;return(0,t.jsxs)(d.l9,{ref:s,className:(0,c.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",a),...i,children:[r,(0,t.jsx)(d.In,{asChild:!0,children:(0,t.jsx)(l.A,{className:"h-4 w-4 opacity-50"})})]})});x.displayName=d.l9.displayName;let u=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)(d.PP,{ref:s,className:(0,c.cn)("flex cursor-default items-center justify-center py-1",a),...r,children:(0,t.jsx)(i.A,{className:"h-4 w-4"})})});u.displayName=d.PP.displayName;let h=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)(d.wn,{ref:s,className:(0,c.cn)("flex cursor-default items-center justify-center py-1",a),...r,children:(0,t.jsx)(l.A,{className:"h-4 w-4"})})});h.displayName=d.wn.displayName;let f=r.forwardRef((e,s)=>{let{className:a,children:r,position:l="popper",...i}=e;return(0,t.jsx)(d.ZL,{children:(0,t.jsxs)(d.UC,{ref:s,className:(0,c.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===l&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",a),position:l,...i,children:[(0,t.jsx)(u,{}),(0,t.jsx)(d.LM,{className:(0,c.cn)("p-1","popper"===l&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:r}),(0,t.jsx)(h,{})]})})});f.displayName=d.UC.displayName,r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)(d.JU,{ref:s,className:(0,c.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",a),...r})}).displayName=d.JU.displayName;let p=r.forwardRef((e,s)=>{let{className:a,children:r,...l}=e;return(0,t.jsxs)(d.q7,{ref:s,className:(0,c.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),...l,children:[(0,t.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,t.jsx)(d.VF,{children:(0,t.jsx)(n.A,{className:"h-4 w-4"})})}),(0,t.jsx)(d.p4,{children:r})]})});p.displayName=d.q7.displayName,r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)(d.wv,{ref:s,className:(0,c.cn)("-mx-1 my-1 h-px bg-muted",a),...r})}).displayName=d.wv.displayName},11647:(e,s,a)=>{"use strict";a.d(s,{E:()=>i});var t=a(95155);a(12115);var r=a(83101),d=a(64269);let l=(0,r.F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function i(e){let{className:s,variant:a,...r}=e;return(0,t.jsx)("div",{className:(0,d.cn)(l({variant:a}),s),...r})}},13406:(e,s,a)=>{"use strict";a.d(s,{Xi:()=>c,av:()=>o,j7:()=>n,tU:()=>i});var t=a(95155),r=a(12115),d=a(25667),l=a(64269);let i=d.bL,n=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)(d.B8,{ref:s,className:(0,l.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",a),...r})});n.displayName=d.B8.displayName;let c=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)(d.l9,{ref:s,className:(0,l.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",a),...r})});c.displayName=d.l9.displayName;let o=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)(d.UC,{ref:s,className:(0,l.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",a),...r})});o.displayName=d.UC.displayName},17037:(e,s,a)=>{"use strict";a.d(s,{F:()=>i});var t=a(95155),r=a(12115),d=a(59034),l=a(64269);let i=r.forwardRef((e,s)=>{let{className:a,children:r,...i}=e;return(0,t.jsxs)(d.bL,{ref:s,className:(0,l.cn)("relative overflow-hidden",a),...i,children:[(0,t.jsx)(d.LM,{className:"h-full w-full rounded-[inherit]",children:r}),(0,t.jsx)(n,{}),(0,t.jsx)(d.OK,{})]})});i.displayName=d.bL.displayName;let n=r.forwardRef((e,s)=>{let{className:a,orientation:r="vertical",...i}=e;return(0,t.jsx)(d.VM,{ref:s,orientation:r,className:(0,l.cn)("flex touch-none select-none transition-colors","vertical"===r&&"h-full w-2.5 border-l border-l-transparent p-[1px]","horizontal"===r&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",a),...i,children:(0,t.jsx)(d.lr,{className:"relative flex-1 rounded-full bg-border"})})});n.displayName=d.VM.displayName},26333:(e,s,a)=>{"use strict";a.d(s,{AM:()=>i,Wv:()=>n,hl:()=>c});var t=a(95155),r=a(12115),d=a(20561),l=a(64269);let i=d.bL,n=d.l9,c=r.forwardRef((e,s)=>{let{className:a,align:r="center",sideOffset:i=4,...n}=e;return(0,t.jsx)(d.ZL,{children:(0,t.jsx)(d.UC,{ref:s,align:r,sideOffset:i,className:(0,l.cn)("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a),...n})})});c.displayName=d.UC.displayName},27314:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t=(0,a(14294).A)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},31120:(e,s,a)=>{"use strict";a.d(s,{T:()=>l});var t=a(95155),r=a(12115),d=a(64269);let l=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)("textarea",{className:(0,d.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),ref:s,...r})});l.displayName="Textarea"},60406:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t=(0,a(14294).A)("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]])},64281:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>L});var t=a(95155),r=a(60796),d=a(3998),l=a(87270),i=a(86948),n=a(90109),c=a(32265),o=a(27314),m=a(92033),x=a(92925),u=a(60406),h=a(74640),f=a(13630),p=a(97776),j=a(6943),N=a(65142),v=a(12115),g=a(51834),y=a(26333),b=a(76444),w=a(14585),A=a(19708),k=a(15894),C=a(31120),S=a(17037),P=a(13406),F=a(11186),R=a(11647),M=a(52619),I=a.n(M);function L(){var e,s,a,M,L,q,T,U,V,E,z;let{data:J,loading:D}=(0,r.$l)("students","lastName","asc"),{data:B,loading:O}=(0,r.$l)("schools","name","asc"),{data:$,loading:H}=(0,r.$l)("users","displayName","asc"),[_,X]=(0,v.useState)(""),[G,W]=(0,v.useState)(!1),[Z,K]=(0,v.useState)(!1),[Y,Q]=(0,v.useState)(null),[ee,es]=(0,v.useState)(!1),[ea,et]=(0,v.useState)(null),{toast:er}=(0,k.dj)(),ed=$.filter(e=>"parent"===e.role),el=J.filter(e=>{var s,a;return((null==(s=e.firstName)?void 0:s.toLowerCase())||"").includes(_.toLowerCase())||((null==(a=e.lastName)?void 0:a.toLowerCase())||"").includes(_.toLowerCase())}),ei=ed.filter(e=>{var s,a;return((null==(s=e.displayName)?void 0:s.toLowerCase())||"").includes(_.toLowerCase())||((null==(a=e.email)?void 0:a.toLowerCase())||"").includes(_.toLowerCase())}),en=async e=>{e.preventDefault(),K(!0);let s=new FormData(e.currentTarget),a={firstName:s.get("firstName"),lastName:s.get("lastName"),dateOfBirth:s.get("dob"),gender:s.get("gender"),schoolId:s.get("schoolId"),parentId:s.get("parentId"),address:s.get("address"),updatedAt:(0,A.serverTimestamp)()};try{Y?(await (0,A.updateDoc)((0,A.doc)(w.db,"students",Y),a),er({title:"Updated",description:"Student profile updated."})):(await (0,A.addDoc)((0,A.collection)(w.db,"students"),{...a,history:[],alerts:[],createdAt:(0,A.serverTimestamp)()}),er({title:"Created",description:"Successfully added new student."})),W(!1),Q(null)}catch(e){er({title:"Error",description:e.message,variant:"destructive"})}finally{K(!1)}},ec=async e=>{confirm("Are you sure you want to delete this student?")&&await (0,A.deleteDoc)((0,A.doc)(w.db,"students",e))},eo=e=>{var s;return(null==(s=B.find(s=>s.id===e))?void 0:s.name)||e},em=e=>{if(!e)return"No Parent Linked";let s=$.find(s=>s.id===e||s.uid===e);return s?s.displayName:"Unknown Parent"},ex=async e=>{e.preventDefault(),K(!0);let s=new FormData(e.currentTarget),a=s.get("linkedStudentId"),t={displayName:s.get("name"),email:s.get("email"),role:"parent",phone:s.get("phone"),address:s.get("address"),linkedStudentIds:a&&"none"!==a?[a]:[],updatedAt:(0,A.serverTimestamp)()};try{let e;if(ea?(e=(0,A.doc)(w.db,"users",ea),await (0,A.updateDoc)(e,t),er({title:"Updated",description:"Parent profile updated."})):(e=await (0,A.addDoc)((0,A.collection)(w.db,"users"),{...t,uid:"gen_parent_"+Math.random().toString(36),createdAt:(0,A.serverTimestamp)()}),er({title:"Created",description:"Parent profile added."})),a&&"none"!==a){let s=(0,A.doc)(w.db,"students",a);await (0,A.updateDoc)(s,{parentId:ea||(null==e?void 0:e.id)})}es(!1),et(null)}catch(e){er({title:"Error",description:e.message,variant:"destructive"})}finally{K(!1)}},eu=async e=>{confirm("Delete this parent profile?")&&await (0,A.deleteDoc)((0,A.doc)(w.db,"users",e))};return(0,t.jsxs)("div",{className:"space-y-8",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-3xl font-bold tracking-tight text-primary",children:"Students & Parents"}),(0,t.jsx)("p",{className:"text-muted-foreground",children:"Manage student records and parent/guardian profiles."})]}),(0,t.jsxs)(P.tU,{defaultValue:"students",className:"space-y-4",children:[(0,t.jsxs)(P.j7,{children:[(0,t.jsx)(P.Xi,{value:"students",children:"Student Directory"}),(0,t.jsx)(P.Xi,{value:"parents",children:"Parent Management"})]}),(0,t.jsxs)(P.av,{value:"students",className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsxs)("div",{className:"relative w-64",children:[(0,t.jsx)(n.A,{className:"absolute left-2 top-2.5 h-4 w-4 text-muted-foreground"}),(0,t.jsx)(N.p,{placeholder:"Search students...",className:"pl-8",value:_,onChange:e=>X(e.target.value)})]}),(0,t.jsxs)(g.lG,{open:G,onOpenChange:e=>{W(e),e||Q(null)},children:[(0,t.jsx)(g.zM,{asChild:!0,children:(0,t.jsxs)(d.$,{children:[(0,t.jsx)(c.A,{className:"mr-2 h-4 w-4"})," Add Student"]})}),(0,t.jsxs)(g.Cf,{className:"max-w-3xl max-h-[90vh] overflow-hidden flex flex-col",children:[(0,t.jsxs)(g.c7,{children:[(0,t.jsx)(g.L3,{children:Y?"Edit Student Profile":"Add New Student Profile"}),(0,t.jsx)(g.rr,{children:"Enter comprehensive details. Use tabs for different sections."})]}),(0,t.jsx)(S.F,{className:"flex-1 pr-4",children:(0,t.jsx)("form",{id:"student-form",onSubmit:en,className:"space-y-4 p-1",children:(0,t.jsxs)(P.tU,{defaultValue:"personal",className:"w-full",children:[(0,t.jsxs)(P.j7,{className:"grid w-full grid-cols-2",children:[(0,t.jsx)(P.Xi,{value:"personal",children:"Personal & School"}),(0,t.jsx)(P.Xi,{value:"family",children:"Family & Guardian"})]}),(0,t.jsxs)(P.av,{value:"personal",className:"space-y-4 pt-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4 mb-4",children:[(0,t.jsx)("div",{className:"h-24 w-24 rounded-full bg-secondary flex items-center justify-center border-2 border-dashed border-muted-foreground/50 cursor-pointer hover:bg-secondary/80",children:(0,t.jsx)(o.A,{className:"h-8 w-8 text-muted-foreground"})}),(0,t.jsx)("div",{className:"text-sm text-muted-foreground",children:(0,t.jsx)("p",{children:"Upload Student Photo"})})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(b.J,{htmlFor:"firstName",children:"First Name"}),(0,t.jsx)(N.p,{id:"firstName",name:"firstName",required:!0,defaultValue:Y?null==(e=J.find(e=>e.id===Y))?void 0:e.firstName:""})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(b.J,{htmlFor:"lastName",children:"Last Name"}),(0,t.jsx)(N.p,{id:"lastName",name:"lastName",required:!0,defaultValue:Y?null==(s=J.find(e=>e.id===Y))?void 0:s.lastName:""})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(b.J,{htmlFor:"dob",children:"Date of Birth"}),(0,t.jsx)(N.p,{id:"dob",name:"dob",type:"date",required:!0,defaultValue:Y?null==(a=J.find(e=>e.id===Y))?void 0:a.dateOfBirth:""})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(b.J,{htmlFor:"gender",children:"Gender"}),(0,t.jsxs)(F.l6,{name:"gender",defaultValue:Y?null==(M=J.find(e=>e.id===Y))?void 0:M.gender:"Male",children:[(0,t.jsx)(F.bq,{children:(0,t.jsx)(F.yv,{placeholder:"Select"})}),(0,t.jsxs)(F.gC,{children:[(0,t.jsx)(F.eb,{value:"Male",children:"Male"}),(0,t.jsx)(F.eb,{value:"Female",children:"Female"}),(0,t.jsx)(F.eb,{value:"Other",children:"Other"})]})]})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(b.J,{htmlFor:"address",children:"Residential Address"}),(0,t.jsx)(C.T,{id:"address",name:"address",required:!0,defaultValue:Y?null==(L=J.find(e=>e.id===Y))?void 0:L.address:""})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(b.J,{htmlFor:"schoolId",children:"Current School"}),(0,t.jsxs)(F.l6,{name:"schoolId",required:!0,defaultValue:Y?null==(q=J.find(e=>e.id===Y))?void 0:q.schoolId:"",children:[(0,t.jsx)(F.bq,{children:(0,t.jsx)(F.yv,{placeholder:"Select School"})}),(0,t.jsx)(F.gC,{children:B.map(e=>(0,t.jsx)(F.eb,{value:e.id,children:e.name},e.id))})]})]})]}),(0,t.jsx)(P.av,{value:"family",className:"space-y-4 pt-4",children:(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(b.J,{htmlFor:"parentId",children:"Link Parent"}),(0,t.jsxs)(F.l6,{name:"parentId",defaultValue:Y?null==(T=J.find(e=>e.id===Y))?void 0:T.parentId:"",children:[(0,t.jsx)(F.bq,{children:(0,t.jsx)(F.yv,{placeholder:"Select Existing Parent"})}),(0,t.jsx)(F.gC,{children:ed.map(e=>(0,t.jsxs)(F.eb,{value:e.id,children:[e.displayName," (",e.email,")"]},e.id))})]}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"Select an existing parent user account."})]})})]})})}),(0,t.jsx)(g.Es,{className:"py-4",children:(0,t.jsxs)(d.$,{form:"student-form",type:"submit",disabled:Z,className:"w-full",children:[Z&&(0,t.jsx)(m.A,{className:"mr-2 h-4 w-4 animate-spin"}),"Save Student Profile"]})})]})]})]}),(0,t.jsx)(i.Zp,{children:(0,t.jsx)(i.Wu,{className:"pt-6",children:D||O?(0,t.jsx)("div",{className:"flex justify-center py-8",children:(0,t.jsx)(m.A,{className:"h-8 w-8 animate-spin text-primary"})}):(0,t.jsxs)(l.XI,{children:[(0,t.jsx)(l.A0,{children:(0,t.jsxs)(l.Hj,{children:[(0,t.jsx)(l.nd,{children:"Name"}),(0,t.jsx)(l.nd,{children:"School"}),(0,t.jsx)(l.nd,{children:"Guardian"}),(0,t.jsx)(l.nd,{children:"Alerts"}),(0,t.jsx)(l.nd,{className:"text-right",children:"Actions"})]})}),(0,t.jsx)(l.BF,{children:el.map(e=>{var s,a;return(0,t.jsxs)(l.Hj,{children:[(0,t.jsx)(l.nA,{className:"font-medium",children:(0,t.jsxs)(y.AM,{children:[(0,t.jsx)(y.Wv,{asChild:!0,children:(0,t.jsxs)("div",{className:"flex items-center gap-2 cursor-pointer hover:bg-muted/50 p-2 rounded-md transition-colors w-fit",children:[(0,t.jsxs)("div",{className:"h-8 w-8 rounded-full bg-primary/10 flex items-center justify-center text-xs font-bold text-primary",children:[null==(s=e.firstName)?void 0:s[0],null==(a=e.lastName)?void 0:a[0]]}),(0,t.jsxs)("div",{className:"text-left",children:[(0,t.jsxs)("div",{className:"font-semibold",children:[e.firstName," ",e.lastName]}),(0,t.jsx)("div",{className:"text-xs text-muted-foreground",children:e.dateOfBirth})]})]})}),(0,t.jsx)(y.hl,{className:"w-80 p-0",align:"start",children:(0,t.jsxs)("div",{className:"p-4 space-y-4",children:[(0,t.jsxs)("div",{className:"flex justify-between items-start",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("h4",{className:"font-semibold text-base",children:[e.firstName," ",e.lastName]}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:eo(e.schoolId)})]}),(0,t.jsx)(I(),{href:"/dashboard/students/".concat(e.id),children:(0,t.jsxs)(d.$,{size:"sm",variant:"default",className:"h-8",children:["View Profile ",(0,t.jsx)(x.A,{className:"ml-2 h-3 w-3"})]})})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-3 text-sm border-t pt-3",children:[(0,t.jsxs)("div",{className:"flex flex-col",children:[(0,t.jsx)("span",{className:"text-xs text-muted-foreground",children:"Date of Birth"}),(0,t.jsx)("span",{children:e.dateOfBirth||"N/A"})]}),(0,t.jsxs)("div",{className:"flex flex-col",children:[(0,t.jsx)("span",{className:"text-xs text-muted-foreground",children:"Gender"}),(0,t.jsx)("span",{className:"capitalize",children:e.gender||"N/A"})]}),(0,t.jsxs)("div",{className:"col-span-2 flex flex-col",children:[(0,t.jsx)("span",{className:"text-xs text-muted-foreground",children:"Guardian"}),(0,t.jsx)("span",{children:em(e.parentId)})]})]}),e.alerts&&e.alerts.length>0?(0,t.jsxs)("div",{className:"bg-red-50 p-2 rounded border border-red-200 text-xs text-red-800 flex items-start gap-2",children:[(0,t.jsx)(u.A,{className:"h-4 w-4 shrink-0"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("strong",{children:"Action Required:"})," ",e.alerts.length," active alerts linked to this student."]})]}):(0,t.jsx)("div",{className:"bg-green-50 p-2 rounded border border-green-200 text-xs text-green-800 text-center",children:"No active alerts."})]})})]})}),(0,t.jsx)(l.nA,{children:eo(e.schoolId)}),(0,t.jsx)(l.nA,{children:(0,t.jsx)("span",{className:"text-sm",children:em(e.parentId)})}),(0,t.jsx)(l.nA,{children:Math.random()>.8&&(0,t.jsxs)(R.E,{variant:"outline",className:"text-yellow-600 border-yellow-200 bg-yellow-50",children:[(0,t.jsx)(u.A,{className:"h-3 w-3 mr-1"}),"Review"]})}),(0,t.jsx)(l.nA,{className:"text-right",children:(0,t.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,t.jsx)(d.$,{variant:"ghost",size:"icon",onClick:()=>{Q(e.id),W(!0)},children:(0,t.jsx)(h.A,{className:"h-4 w-4"})}),(0,t.jsx)(d.$,{variant:"ghost",size:"icon",onClick:()=>ec(e.id),children:(0,t.jsx)(f.A,{className:"h-4 w-4 text-destructive"})})]})})]},e.id)})})]})})})]}),(0,t.jsxs)(P.av,{value:"parents",className:"space-y-4",children:[(0,t.jsx)("div",{className:"flex justify-end",children:(0,t.jsxs)(g.lG,{open:ee,onOpenChange:e=>{es(e),e||et(null)},children:[(0,t.jsx)(g.zM,{asChild:!0,children:(0,t.jsxs)(d.$,{children:[(0,t.jsx)(c.A,{className:"mr-2 h-4 w-4"})," Add Parent Profile"]})}),(0,t.jsxs)(g.Cf,{className:"max-w-2xl",children:[(0,t.jsxs)(g.c7,{children:[(0,t.jsx)(g.L3,{children:ea?"Edit Parent":"Add Parent Profile"}),(0,t.jsx)(g.rr,{children:"Create a profile for a guardian."})]}),(0,t.jsxs)("form",{onSubmit:ex,className:"space-y-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(b.J,{htmlFor:"name",children:"Full Name"}),(0,t.jsx)(N.p,{id:"name",name:"name",required:!0,defaultValue:ea?null==(U=ed.find(e=>e.id===ea))?void 0:U.displayName:""})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(b.J,{htmlFor:"email",children:"Email"}),(0,t.jsx)(N.p,{id:"email",name:"email",type:"email",required:!0,defaultValue:ea?null==(V=ed.find(e=>e.id===ea))?void 0:V.email:""})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(b.J,{htmlFor:"phone",children:"Phone Number"}),(0,t.jsx)(N.p,{id:"phone",name:"phone",type:"tel",defaultValue:ea?null==(E=ed.find(e=>e.id===ea))?void 0:E.phone:""})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(b.J,{htmlFor:"address",children:"Address"}),(0,t.jsx)(C.T,{id:"address",name:"address",defaultValue:ea?null==(z=ed.find(e=>e.id===ea))?void 0:z.address:""})]}),(0,t.jsxs)("div",{className:"space-y-2 pt-2 border-t",children:[(0,t.jsx)(b.J,{htmlFor:"linkedStudentId",children:"Link to Student"}),(0,t.jsxs)(F.l6,{name:"linkedStudentId",children:[(0,t.jsx)(F.bq,{children:(0,t.jsx)(F.yv,{placeholder:"Select Child"})}),(0,t.jsxs)(F.gC,{children:[(0,t.jsx)(F.eb,{value:"none",children:"None"}),J.map(e=>(0,t.jsxs)(F.eb,{value:e.id,children:[e.firstName," ",e.lastName]},e.id))]})]}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"This will link the student to this parent."})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(b.J,{children:"Proof of Relationship (Evidence)"}),(0,t.jsxs)("div",{className:"border-2 border-dashed rounded p-4 text-center text-sm text-muted-foreground cursor-pointer hover:bg-muted/50",children:[(0,t.jsx)(p.A,{className:"h-6 w-6 mx-auto mb-1"}),"Upload Birth Certificate / Court Order"]})]}),(0,t.jsx)(g.Es,{children:(0,t.jsxs)(d.$,{type:"submit",disabled:Z,children:[Z&&(0,t.jsx)(m.A,{className:"mr-2 h-4 w-4 animate-spin"}),"Save Profile"]})})]})]})]})}),(0,t.jsx)(i.Zp,{children:(0,t.jsx)(i.Wu,{className:"pt-6",children:H?(0,t.jsx)("div",{className:"flex justify-center py-8",children:(0,t.jsx)(m.A,{className:"h-8 w-8 animate-spin text-primary"})}):(0,t.jsxs)(l.XI,{children:[(0,t.jsx)(l.A0,{children:(0,t.jsxs)(l.Hj,{children:[(0,t.jsx)(l.nd,{children:"Name"}),(0,t.jsx)(l.nd,{children:"Email"}),(0,t.jsx)(l.nd,{children:"Phone"}),(0,t.jsx)(l.nd,{children:"Children"}),(0,t.jsx)(l.nd,{className:"text-right",children:"Actions"})]})}),(0,t.jsx)(l.BF,{children:ei.map(e=>{let s=J.filter(s=>s.parentId===e.id||s.parentId===e.uid);return(0,t.jsxs)(l.Hj,{children:[(0,t.jsxs)(l.nA,{className:"font-medium flex items-center gap-2",children:[(0,t.jsx)(j.A,{className:"h-4 w-4 text-muted-foreground"}),e.displayName]}),(0,t.jsx)(l.nA,{children:e.email}),(0,t.jsx)(l.nA,{children:e.phone||"-"}),(0,t.jsx)(l.nA,{children:(0,t.jsx)("div",{className:"flex flex-col gap-1",children:s.length>0?s.map(e=>(0,t.jsx)(R.E,{variant:"secondary",className:"w-fit text-[10px]",children:e.firstName},e.id)):(0,t.jsx)("span",{className:"text-xs text-muted-foreground",children:"None"})})}),(0,t.jsx)(l.nA,{className:"text-right",children:(0,t.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,t.jsx)(d.$,{variant:"ghost",size:"icon",onClick:()=>{et(e.id),es(!0)},children:(0,t.jsx)(h.A,{className:"h-4 w-4"})}),(0,t.jsx)(d.$,{variant:"ghost",size:"icon",onClick:()=>eu(e.id),children:(0,t.jsx)(f.A,{className:"h-4 w-4 text-destructive"})})]})})]},e.id)})})]})})})]})]})]})}},87270:(e,s,a)=>{"use strict";a.d(s,{A0:()=>i,BF:()=>n,Hj:()=>c,XI:()=>l,nA:()=>m,nd:()=>o});var t=a(95155),r=a(12115),d=a(64269);let l=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)("div",{className:"relative w-full overflow-auto",children:(0,t.jsx)("table",{ref:s,className:(0,d.cn)("w-full caption-bottom text-sm",a),...r})})});l.displayName="Table";let i=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)("thead",{ref:s,className:(0,d.cn)("[&_tr]:border-b",a),...r})});i.displayName="TableHeader";let n=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)("tbody",{ref:s,className:(0,d.cn)("[&_tr:last-child]:border-0",a),...r})});n.displayName="TableBody",r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)("tfoot",{ref:s,className:(0,d.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",a),...r})}).displayName="TableFooter";let c=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)("tr",{ref:s,className:(0,d.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",a),...r})});c.displayName="TableRow";let o=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)("th",{ref:s,className:(0,d.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",a),...r})});o.displayName="TableHead";let m=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)("td",{ref:s,className:(0,d.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",a),...r})});m.displayName="TableCell",r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)("caption",{ref:s,className:(0,d.cn)("mt-4 text-sm text-muted-foreground",a),...r})}).displayName="TableCaption"},92925:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t=(0,a(14294).A)("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]])},97776:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t=(0,a(14294).A)("CloudUpload",[["path",{d:"M12 13v8",key:"1l5pq0"}],["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"m8 17 4-4 4 4",key:"1quai1"}]])}},e=>{e.O(0,[2992,3644,830,9308,1329,8475,7301,85,5667,2619,8253,9034,4098,8441,1255,7358],()=>e(e.s=10829)),_N_E=e.O()}]);