(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[922],{6943:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t=(0,a(14294).A)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]])},10829:(e,s,a)=>{Promise.resolve().then(a.bind(a,64281))},11186:(e,s,a)=>{"use strict";a.d(s,{bq:()=>u,eb:()=>p,gC:()=>f,l6:()=>o,yv:()=>m});var t=a(95155),r=a(12115),l=a(95102),d=a(59007),i=a(42614),n=a(72251),c=a(64269);let o=l.bL;l.YJ;let m=l.WT,u=r.forwardRef((e,s)=>{let{className:a,children:r,...i}=e;return(0,t.jsxs)(l.l9,{ref:s,className:(0,c.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",a),...i,children:[r,(0,t.jsx)(l.In,{asChild:!0,children:(0,t.jsx)(d.A,{className:"h-4 w-4 opacity-50"})})]})});u.displayName=l.l9.displayName;let x=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)(l.PP,{ref:s,className:(0,c.cn)("flex cursor-default items-center justify-center py-1",a),...r,children:(0,t.jsx)(i.A,{className:"h-4 w-4"})})});x.displayName=l.PP.displayName;let h=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)(l.wn,{ref:s,className:(0,c.cn)("flex cursor-default items-center justify-center py-1",a),...r,children:(0,t.jsx)(d.A,{className:"h-4 w-4"})})});h.displayName=l.wn.displayName;let f=r.forwardRef((e,s)=>{let{className:a,children:r,position:d="popper",...i}=e;return(0,t.jsx)(l.ZL,{children:(0,t.jsxs)(l.UC,{ref:s,className:(0,c.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===d&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",a),position:d,...i,children:[(0,t.jsx)(x,{}),(0,t.jsx)(l.LM,{className:(0,c.cn)("p-1","popper"===d&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:r}),(0,t.jsx)(h,{})]})})});f.displayName=l.UC.displayName,r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)(l.JU,{ref:s,className:(0,c.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",a),...r})}).displayName=l.JU.displayName;let p=r.forwardRef((e,s)=>{let{className:a,children:r,...d}=e;return(0,t.jsxs)(l.q7,{ref:s,className:(0,c.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),...d,children:[(0,t.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,t.jsx)(l.VF,{children:(0,t.jsx)(n.A,{className:"h-4 w-4"})})}),(0,t.jsx)(l.p4,{children:r})]})});p.displayName=l.q7.displayName,r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)(l.wv,{ref:s,className:(0,c.cn)("-mx-1 my-1 h-px bg-muted",a),...r})}).displayName=l.wv.displayName},11647:(e,s,a)=>{"use strict";a.d(s,{E:()=>i});var t=a(95155);a(12115);var r=a(83101),l=a(64269);let d=(0,r.F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function i(e){let{className:s,variant:a,...r}=e;return(0,t.jsx)("div",{className:(0,l.cn)(d({variant:a}),s),...r})}},13406:(e,s,a)=>{"use strict";a.d(s,{Xi:()=>c,av:()=>o,j7:()=>n,tU:()=>i});var t=a(95155),r=a(12115),l=a(25667),d=a(64269);let i=l.bL,n=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)(l.B8,{ref:s,className:(0,d.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",a),...r})});n.displayName=l.B8.displayName;let c=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)(l.l9,{ref:s,className:(0,d.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",a),...r})});c.displayName=l.l9.displayName;let o=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)(l.UC,{ref:s,className:(0,d.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",a),...r})});o.displayName=l.UC.displayName},17037:(e,s,a)=>{"use strict";a.d(s,{F:()=>i});var t=a(95155),r=a(12115),l=a(59034),d=a(64269);let i=r.forwardRef((e,s)=>{let{className:a,children:r,...i}=e;return(0,t.jsxs)(l.bL,{ref:s,className:(0,d.cn)("relative overflow-hidden",a),...i,children:[(0,t.jsx)(l.LM,{className:"h-full w-full rounded-[inherit]",children:r}),(0,t.jsx)(n,{}),(0,t.jsx)(l.OK,{})]})});i.displayName=l.bL.displayName;let n=r.forwardRef((e,s)=>{let{className:a,orientation:r="vertical",...i}=e;return(0,t.jsx)(l.VM,{ref:s,orientation:r,className:(0,d.cn)("flex touch-none select-none transition-colors","vertical"===r&&"h-full w-2.5 border-l border-l-transparent p-[1px]","horizontal"===r&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",a),...i,children:(0,t.jsx)(l.lr,{className:"relative flex-1 rounded-full bg-border"})})});n.displayName=l.VM.displayName},27314:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t=(0,a(14294).A)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},31120:(e,s,a)=>{"use strict";a.d(s,{T:()=>d});var t=a(95155),r=a(12115),l=a(64269);let d=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)("textarea",{className:(0,l.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),ref:s,...r})});d.displayName="Textarea"},60406:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t=(0,a(14294).A)("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]])},64281:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>P});var t=a(95155),r=a(60796),l=a(3998),d=a(87270),i=a(86948),n=a(90109),c=a(32265),o=a(27314),m=a(92033),u=a(60406),x=a(74640),h=a(13630),f=a(97776),p=a(6943),j=a(65142),N=a(12115),v=a(51834),y=a(76444),g=a(14585),b=a(19708),w=a(15894),A=a(31120),k=a(17037),C=a(13406),S=a(11186),F=a(11647);function P(){var e,s,a,P,R,I,L,M,T,q,U;let{data:E,loading:V}=(0,r.$l)("students","lastName","asc"),{data:J,loading:D}=(0,r.$l)("schools","name","asc"),{data:z,loading:B}=(0,r.$l)("users","displayName","asc"),[O,$]=(0,N.useState)(""),[_,H]=(0,N.useState)(!1),[X,G]=(0,N.useState)(!1),[W,Z]=(0,N.useState)(null),[K,Y]=(0,N.useState)(!1),[Q,ee]=(0,N.useState)(null),{toast:es}=(0,w.dj)(),ea=z.filter(e=>"parent"===e.role),et=E.filter(e=>{var s,a;return((null==(s=e.firstName)?void 0:s.toLowerCase())||"").includes(O.toLowerCase())||((null==(a=e.lastName)?void 0:a.toLowerCase())||"").includes(O.toLowerCase())}),er=ea.filter(e=>{var s,a;return((null==(s=e.displayName)?void 0:s.toLowerCase())||"").includes(O.toLowerCase())||((null==(a=e.email)?void 0:a.toLowerCase())||"").includes(O.toLowerCase())}),el=async e=>{e.preventDefault(),G(!0);let s=new FormData(e.currentTarget),a={firstName:s.get("firstName"),lastName:s.get("lastName"),dateOfBirth:s.get("dob"),gender:s.get("gender"),schoolId:s.get("schoolId"),parentId:s.get("parentId"),address:s.get("address"),updatedAt:(0,b.serverTimestamp)()};try{W?(await (0,b.updateDoc)((0,b.doc)(g.db,"students",W),a),es({title:"Updated",description:"Student profile updated."})):(await (0,b.addDoc)((0,b.collection)(g.db,"students"),{...a,history:[],alerts:[],createdAt:(0,b.serverTimestamp)()}),es({title:"Created",description:"Successfully added new student."})),H(!1),Z(null)}catch(e){es({title:"Error",description:e.message,variant:"destructive"})}finally{G(!1)}},ed=async e=>{confirm("Are you sure you want to delete this student?")&&await (0,b.deleteDoc)((0,b.doc)(g.db,"students",e))},ei=async e=>{e.preventDefault(),G(!0);let s=new FormData(e.currentTarget),a=s.get("linkedStudentId"),t={displayName:s.get("name"),email:s.get("email"),role:"parent",phone:s.get("phone"),address:s.get("address"),linkedStudentIds:a&&"none"!==a?[a]:[],updatedAt:(0,b.serverTimestamp)()};try{let e;if(Q?(e=(0,b.doc)(g.db,"users",Q),await (0,b.updateDoc)(e,t),es({title:"Updated",description:"Parent profile updated."})):(e=await (0,b.addDoc)((0,b.collection)(g.db,"users"),{...t,uid:"gen_parent_"+Math.random().toString(36),createdAt:(0,b.serverTimestamp)()}),es({title:"Created",description:"Parent profile added."})),a&&"none"!==a){let s=(0,b.doc)(g.db,"students",a);await (0,b.updateDoc)(s,{parentId:Q||(null==e?void 0:e.id)})}Y(!1),ee(null)}catch(e){es({title:"Error",description:e.message,variant:"destructive"})}finally{G(!1)}},en=async e=>{confirm("Delete this parent profile?")&&await (0,b.deleteDoc)((0,b.doc)(g.db,"users",e))};return(0,t.jsxs)("div",{className:"space-y-8",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-3xl font-bold tracking-tight text-primary",children:"Students & Parents"}),(0,t.jsx)("p",{className:"text-muted-foreground",children:"Manage student records and parent/guardian profiles."})]}),(0,t.jsxs)(C.tU,{defaultValue:"students",className:"space-y-4",children:[(0,t.jsxs)(C.j7,{children:[(0,t.jsx)(C.Xi,{value:"students",children:"Student Directory"}),(0,t.jsx)(C.Xi,{value:"parents",children:"Parent Management"})]}),(0,t.jsxs)(C.av,{value:"students",className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsxs)("div",{className:"relative w-64",children:[(0,t.jsx)(n.A,{className:"absolute left-2 top-2.5 h-4 w-4 text-muted-foreground"}),(0,t.jsx)(j.p,{placeholder:"Search students...",className:"pl-8",value:O,onChange:e=>$(e.target.value)})]}),(0,t.jsxs)(v.lG,{open:_,onOpenChange:e=>{H(e),e||Z(null)},children:[(0,t.jsx)(v.zM,{asChild:!0,children:(0,t.jsxs)(l.$,{children:[(0,t.jsx)(c.A,{className:"mr-2 h-4 w-4"})," Add Student"]})}),(0,t.jsxs)(v.Cf,{className:"max-w-3xl max-h-[90vh] overflow-hidden flex flex-col",children:[(0,t.jsxs)(v.c7,{children:[(0,t.jsx)(v.L3,{children:W?"Edit Student Profile":"Add New Student Profile"}),(0,t.jsx)(v.rr,{children:"Enter comprehensive details. Use tabs for different sections."})]}),(0,t.jsx)(k.F,{className:"flex-1 pr-4",children:(0,t.jsx)("form",{id:"student-form",onSubmit:el,className:"space-y-4 p-1",children:(0,t.jsxs)(C.tU,{defaultValue:"personal",className:"w-full",children:[(0,t.jsxs)(C.j7,{className:"grid w-full grid-cols-2",children:[(0,t.jsx)(C.Xi,{value:"personal",children:"Personal & School"}),(0,t.jsx)(C.Xi,{value:"family",children:"Family & Guardian"})]}),(0,t.jsxs)(C.av,{value:"personal",className:"space-y-4 pt-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4 mb-4",children:[(0,t.jsx)("div",{className:"h-24 w-24 rounded-full bg-secondary flex items-center justify-center border-2 border-dashed border-muted-foreground/50 cursor-pointer hover:bg-secondary/80",children:(0,t.jsx)(o.A,{className:"h-8 w-8 text-muted-foreground"})}),(0,t.jsx)("div",{className:"text-sm text-muted-foreground",children:(0,t.jsx)("p",{children:"Upload Student Photo"})})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(y.J,{htmlFor:"firstName",children:"First Name"}),(0,t.jsx)(j.p,{id:"firstName",name:"firstName",required:!0,defaultValue:W?null==(e=E.find(e=>e.id===W))?void 0:e.firstName:""})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(y.J,{htmlFor:"lastName",children:"Last Name"}),(0,t.jsx)(j.p,{id:"lastName",name:"lastName",required:!0,defaultValue:W?null==(s=E.find(e=>e.id===W))?void 0:s.lastName:""})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(y.J,{htmlFor:"dob",children:"Date of Birth"}),(0,t.jsx)(j.p,{id:"dob",name:"dob",type:"date",required:!0,defaultValue:W?null==(a=E.find(e=>e.id===W))?void 0:a.dateOfBirth:""})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(y.J,{htmlFor:"gender",children:"Gender"}),(0,t.jsxs)(S.l6,{name:"gender",defaultValue:W?null==(P=E.find(e=>e.id===W))?void 0:P.gender:"Male",children:[(0,t.jsx)(S.bq,{children:(0,t.jsx)(S.yv,{placeholder:"Select"})}),(0,t.jsxs)(S.gC,{children:[(0,t.jsx)(S.eb,{value:"Male",children:"Male"}),(0,t.jsx)(S.eb,{value:"Female",children:"Female"}),(0,t.jsx)(S.eb,{value:"Other",children:"Other"})]})]})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(y.J,{htmlFor:"address",children:"Residential Address"}),(0,t.jsx)(A.T,{id:"address",name:"address",required:!0,defaultValue:W?null==(R=E.find(e=>e.id===W))?void 0:R.address:""})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(y.J,{htmlFor:"schoolId",children:"Current School"}),(0,t.jsxs)(S.l6,{name:"schoolId",required:!0,defaultValue:W?null==(I=E.find(e=>e.id===W))?void 0:I.schoolId:"",children:[(0,t.jsx)(S.bq,{children:(0,t.jsx)(S.yv,{placeholder:"Select School"})}),(0,t.jsx)(S.gC,{children:J.map(e=>(0,t.jsx)(S.eb,{value:e.id,children:e.name},e.id))})]})]})]}),(0,t.jsx)(C.av,{value:"family",className:"space-y-4 pt-4",children:(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(y.J,{htmlFor:"parentId",children:"Link Parent"}),(0,t.jsxs)(S.l6,{name:"parentId",defaultValue:W?null==(L=E.find(e=>e.id===W))?void 0:L.parentId:"",children:[(0,t.jsx)(S.bq,{children:(0,t.jsx)(S.yv,{placeholder:"Select Existing Parent"})}),(0,t.jsx)(S.gC,{children:ea.map(e=>(0,t.jsxs)(S.eb,{value:e.id,children:[e.displayName," (",e.email,")"]},e.id))})]}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"Select an existing parent user account."})]})})]})})}),(0,t.jsx)(v.Es,{className:"py-4",children:(0,t.jsxs)(l.$,{form:"student-form",type:"submit",disabled:X,className:"w-full",children:[X&&(0,t.jsx)(m.A,{className:"mr-2 h-4 w-4 animate-spin"}),"Save Student Profile"]})})]})]})]}),(0,t.jsx)(i.Zp,{children:(0,t.jsx)(i.Wu,{className:"pt-6",children:V||D?(0,t.jsx)("div",{className:"flex justify-center py-8",children:(0,t.jsx)(m.A,{className:"h-8 w-8 animate-spin text-primary"})}):(0,t.jsxs)(d.XI,{children:[(0,t.jsx)(d.A0,{children:(0,t.jsxs)(d.Hj,{children:[(0,t.jsx)(d.nd,{children:"Name"}),(0,t.jsx)(d.nd,{children:"School"}),(0,t.jsx)(d.nd,{children:"Guardian"}),(0,t.jsx)(d.nd,{children:"Alerts"}),(0,t.jsx)(d.nd,{className:"text-right",children:"Actions"})]})}),(0,t.jsx)(d.BF,{children:et.map(e=>{var s,a,r,i;return(0,t.jsxs)(d.Hj,{children:[(0,t.jsx)(d.nA,{className:"font-medium",children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsxs)("div",{className:"h-8 w-8 rounded-full bg-primary/10 flex items-center justify-center text-xs font-bold text-primary",children:[null==(s=e.firstName)?void 0:s[0],null==(a=e.lastName)?void 0:a[0]]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{children:[e.firstName," ",e.lastName]}),(0,t.jsx)("div",{className:"text-xs text-muted-foreground",children:e.dateOfBirth})]})]})}),(0,t.jsx)(d.nA,{children:(r=e.schoolId,(null==(i=J.find(e=>e.id===r))?void 0:i.name)||r)}),(0,t.jsx)(d.nA,{children:(0,t.jsx)("span",{className:"text-sm",children:(e=>{if(!e)return"No Parent Linked";let s=z.find(s=>s.id===e||s.uid===e);return s?s.displayName:"Unknown Parent"})(e.parentId)})}),(0,t.jsx)(d.nA,{children:Math.random()>.8&&(0,t.jsxs)(F.E,{variant:"outline",className:"text-yellow-600 border-yellow-200 bg-yellow-50",children:[(0,t.jsx)(u.A,{className:"h-3 w-3 mr-1"}),"Review"]})}),(0,t.jsx)(d.nA,{className:"text-right",children:(0,t.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,t.jsx)(l.$,{variant:"ghost",size:"icon",onClick:()=>{Z(e.id),H(!0)},children:(0,t.jsx)(x.A,{className:"h-4 w-4"})}),(0,t.jsx)(l.$,{variant:"ghost",size:"icon",onClick:()=>ed(e.id),children:(0,t.jsx)(h.A,{className:"h-4 w-4 text-destructive"})})]})})]},e.id)})})]})})})]}),(0,t.jsxs)(C.av,{value:"parents",className:"space-y-4",children:[(0,t.jsx)("div",{className:"flex justify-end",children:(0,t.jsxs)(v.lG,{open:K,onOpenChange:e=>{Y(e),e||ee(null)},children:[(0,t.jsx)(v.zM,{asChild:!0,children:(0,t.jsxs)(l.$,{children:[(0,t.jsx)(c.A,{className:"mr-2 h-4 w-4"})," Add Parent Profile"]})}),(0,t.jsxs)(v.Cf,{className:"max-w-2xl",children:[(0,t.jsxs)(v.c7,{children:[(0,t.jsx)(v.L3,{children:Q?"Edit Parent":"Add Parent Profile"}),(0,t.jsx)(v.rr,{children:"Create a profile for a guardian."})]}),(0,t.jsxs)("form",{onSubmit:ei,className:"space-y-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(y.J,{htmlFor:"name",children:"Full Name"}),(0,t.jsx)(j.p,{id:"name",name:"name",required:!0,defaultValue:Q?null==(M=ea.find(e=>e.id===Q))?void 0:M.displayName:""})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(y.J,{htmlFor:"email",children:"Email"}),(0,t.jsx)(j.p,{id:"email",name:"email",type:"email",required:!0,defaultValue:Q?null==(T=ea.find(e=>e.id===Q))?void 0:T.email:""})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(y.J,{htmlFor:"phone",children:"Phone Number"}),(0,t.jsx)(j.p,{id:"phone",name:"phone",type:"tel",defaultValue:Q?null==(q=ea.find(e=>e.id===Q))?void 0:q.phone:""})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(y.J,{htmlFor:"address",children:"Address"}),(0,t.jsx)(A.T,{id:"address",name:"address",defaultValue:Q?null==(U=ea.find(e=>e.id===Q))?void 0:U.address:""})]}),(0,t.jsxs)("div",{className:"space-y-2 pt-2 border-t",children:[(0,t.jsx)(y.J,{htmlFor:"linkedStudentId",children:"Link to Student"}),(0,t.jsxs)(S.l6,{name:"linkedStudentId",children:[(0,t.jsx)(S.bq,{children:(0,t.jsx)(S.yv,{placeholder:"Select Child"})}),(0,t.jsxs)(S.gC,{children:[(0,t.jsx)(S.eb,{value:"none",children:"None"}),E.map(e=>(0,t.jsxs)(S.eb,{value:e.id,children:[e.firstName," ",e.lastName]},e.id))]})]}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"This will link the student to this parent."})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(y.J,{children:"Proof of Relationship (Evidence)"}),(0,t.jsxs)("div",{className:"border-2 border-dashed rounded p-4 text-center text-sm text-muted-foreground cursor-pointer hover:bg-muted/50",children:[(0,t.jsx)(f.A,{className:"h-6 w-6 mx-auto mb-1"}),"Upload Birth Certificate / Court Order"]})]}),(0,t.jsx)(v.Es,{children:(0,t.jsxs)(l.$,{type:"submit",disabled:X,children:[X&&(0,t.jsx)(m.A,{className:"mr-2 h-4 w-4 animate-spin"}),"Save Profile"]})})]})]})]})}),(0,t.jsx)(i.Zp,{children:(0,t.jsx)(i.Wu,{className:"pt-6",children:B?(0,t.jsx)("div",{className:"flex justify-center py-8",children:(0,t.jsx)(m.A,{className:"h-8 w-8 animate-spin text-primary"})}):(0,t.jsxs)(d.XI,{children:[(0,t.jsx)(d.A0,{children:(0,t.jsxs)(d.Hj,{children:[(0,t.jsx)(d.nd,{children:"Name"}),(0,t.jsx)(d.nd,{children:"Email"}),(0,t.jsx)(d.nd,{children:"Phone"}),(0,t.jsx)(d.nd,{children:"Children"}),(0,t.jsx)(d.nd,{className:"text-right",children:"Actions"})]})}),(0,t.jsx)(d.BF,{children:er.map(e=>{let s=E.filter(s=>s.parentId===e.id||s.parentId===e.uid);return(0,t.jsxs)(d.Hj,{children:[(0,t.jsxs)(d.nA,{className:"font-medium flex items-center gap-2",children:[(0,t.jsx)(p.A,{className:"h-4 w-4 text-muted-foreground"}),e.displayName]}),(0,t.jsx)(d.nA,{children:e.email}),(0,t.jsx)(d.nA,{children:e.phone||"-"}),(0,t.jsx)(d.nA,{children:(0,t.jsx)("div",{className:"flex flex-col gap-1",children:s.length>0?s.map(e=>(0,t.jsx)(F.E,{variant:"secondary",className:"w-fit text-[10px]",children:e.firstName},e.id)):(0,t.jsx)("span",{className:"text-xs text-muted-foreground",children:"None"})})}),(0,t.jsx)(d.nA,{className:"text-right",children:(0,t.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,t.jsx)(l.$,{variant:"ghost",size:"icon",onClick:()=>{ee(e.id),Y(!0)},children:(0,t.jsx)(x.A,{className:"h-4 w-4"})}),(0,t.jsx)(l.$,{variant:"ghost",size:"icon",onClick:()=>en(e.id),children:(0,t.jsx)(h.A,{className:"h-4 w-4 text-destructive"})})]})})]},e.id)})})]})})})]})]})]})}},87270:(e,s,a)=>{"use strict";a.d(s,{A0:()=>i,BF:()=>n,Hj:()=>c,XI:()=>d,nA:()=>m,nd:()=>o});var t=a(95155),r=a(12115),l=a(64269);let d=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)("div",{className:"relative w-full overflow-auto",children:(0,t.jsx)("table",{ref:s,className:(0,l.cn)("w-full caption-bottom text-sm",a),...r})})});d.displayName="Table";let i=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)("thead",{ref:s,className:(0,l.cn)("[&_tr]:border-b",a),...r})});i.displayName="TableHeader";let n=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)("tbody",{ref:s,className:(0,l.cn)("[&_tr:last-child]:border-0",a),...r})});n.displayName="TableBody",r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)("tfoot",{ref:s,className:(0,l.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",a),...r})}).displayName="TableFooter";let c=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)("tr",{ref:s,className:(0,l.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",a),...r})});c.displayName="TableRow";let o=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)("th",{ref:s,className:(0,l.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",a),...r})});o.displayName="TableHead";let m=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)("td",{ref:s,className:(0,l.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",a),...r})});m.displayName="TableCell",r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)("caption",{ref:s,className:(0,l.cn)("mt-4 text-sm text-muted-foreground",a),...r})}).displayName="TableCaption"},90109:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t=(0,a(14294).A)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},97776:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t=(0,a(14294).A)("CloudUpload",[["path",{d:"M12 13v8",key:"1l5pq0"}],["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"m8 17 4-4 4 4",key:"1quai1"}]])}},e=>{e.O(0,[2992,3644,830,5936,7590,1329,9295,7819,85,5667,9034,4098,8441,1255,7358],()=>e(e.s=10829)),_N_E=e.O()}]);