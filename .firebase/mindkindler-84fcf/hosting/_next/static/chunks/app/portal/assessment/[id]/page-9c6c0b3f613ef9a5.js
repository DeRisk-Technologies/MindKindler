(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8406],{3998:(e,t,s)=>{"use strict";s.d(t,{$:()=>o,r:()=>d});var r=s(95155),a=s(12115),i=s(17129),n=s(83101),l=s(64269);let d=(0,n.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),o=a.forwardRef((e,t)=>{let{className:s,variant:a,size:n,asChild:o=!1,...c}=e,u=o?i.DX:"button";return(0,r.jsx)(u,{className:(0,l.cn)(d({variant:a,size:n,className:s})),ref:t,...c})});o.displayName="Button"},14585:(e,t,s)=>{"use strict";s.d(t,{db:()=>d,j2:()=>o});var r=s(52078),a=s(19708),i=s(59253),n=s(68871);let l=(0,r.Dk)().length?(0,r.Sx)():(0,r.Wp)({apiKey:"AIzaSyDEOFFGICbWClq9KvPK7WGxGTluShM_wpg",authDomain:"studio-1557923276-46e4b.firebaseapp.com",projectId:"studio-1557923276-46e4b",storageBucket:"studio-1557923276-46e4b.firebasestorage.app",messagingSenderId:"555793507902",appId:"1:555793507902:web:95f046942832edc23b136f"}),d=(0,a.getFirestore)(l),o=(0,i.xI)(l);(0,n.TT)().then(e=>{e&&(0,n.P5)(l)}).catch(console.error)},15894:(e,t,s)=>{"use strict";s.d(t,{dj:()=>u});var r=s(12115);let a=0,i=new Map,n=e=>{if(i.has(e))return;let t=setTimeout(()=>{i.delete(e),o({type:"REMOVE_TOAST",toastId:e})},1e6);i.set(e,t)},l=[],d={toasts:[]};function o(e){d=((e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:s}=t;return s?n(s):e.toasts.forEach(e=>{n(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===s||void 0===s?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}})(d,e),l.forEach(e=>{e(d)})}function c(e){let{...t}=e,s=(a=(a+1)%Number.MAX_SAFE_INTEGER).toString(),r=()=>o({type:"DISMISS_TOAST",toastId:s});return o({type:"ADD_TOAST",toast:{...t,id:s,open:!0,onOpenChange:e=>{e||r()}}}),{id:s,dismiss:r,update:e=>o({type:"UPDATE_TOAST",toast:{...e,id:s}})}}function u(){let[e,t]=r.useState(d);return r.useEffect(()=>(l.push(t),()=>{let e=l.indexOf(t);e>-1&&l.splice(e,1)}),[e]),{...e,toast:c,dismiss:e=>o({type:"DISMISS_TOAST",toastId:e})}}},31120:(e,t,s)=>{"use strict";s.d(t,{T:()=>n});var r=s(95155),a=s(12115),i=s(64269);let n=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("textarea",{className:(0,i.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",s),ref:t,...a})});n.displayName="Textarea"},37885:(e,t,s)=>{Promise.resolve().then(s.bind(s,64525))},50909:(e,t,s)=>{"use strict";s.d(t,{C:()=>o,z:()=>d});var r=s(95155),a=s(12115),i=s(24058),n=s(75797),l=s(64269);let d=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)(i.bL,{className:(0,l.cn)("grid gap-2",s),...a,ref:t})});d.displayName=i.bL.displayName;let o=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)(i.q7,{ref:t,className:(0,l.cn)("aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",s),...a,children:(0,r.jsx)(i.C1,{className:"flex items-center justify-center",children:(0,r.jsx)(n.A,{className:"h-2.5 w-2.5 fill-current text-current"})})})});o.displayName=i.q7.displayName},64269:(e,t,s)=>{"use strict";s.d(t,{cn:()=>i});var r=s(2821),a=s(75889);function i(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,a.QP)((0,r.$)(t))}},64525:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>v});var r=s(95155),a=s(12115),i=s(20063),n=s(19708),l=s(14585),d=s(3998),o=s(86948),c=s(50909),u=s(76444),f=s(31120),p=s(65142),m=s(80991),x=s(15894),h=s(92033),b=s(18527),g=s(25212);function v(){var e;let{id:t}=(0,i.useParams)(),{toast:s}=(0,x.dj)(),[v,y]=(0,a.useState)(null),[N,j]=(0,a.useState)(!0),[w,S]=(0,a.useState)({}),[T,A]=(0,a.useState)(0),[k,C]=(0,a.useState)(!1),[_,I]=(0,a.useState)(!1);(0,a.useEffect)(()=>{(async()=>{if(t)try{let e=(0,n.doc)(l.db,"assessment_templates",t),r=await (0,n.getDoc)(e);r.exists()?y({id:r.id,...r.data()}):s({title:"Error",description:"Assessment not found",variant:"destructive"})}catch(e){console.error("Fetch error",e)}finally{j(!1)}})()},[t]);let R=(e,t)=>{S(s=>({...s,[e]:t}))},E=async()=>{if(!v)return;C(!0);let e=0,t=0;v.questions.forEach(s=>{t+=s.points,("multiple-choice"===s.type||"true-false"===s.type)&&w[s.id]===s.correctAnswer&&(e+=s.points)});try{await (0,n.addDoc)((0,n.collection)(l.db,"assessment_results"),{templateId:v.id,studentId:"current_student_id",responses:w,totalScore:e,maxScore:t,status:"pending-review",startedAt:new Date().toISOString(),completedAt:(0,n.serverTimestamp)()}),I(!0)}catch(e){s({title:"Submission Failed",description:"Please try again.",variant:"destructive"})}finally{C(!1)}};if(N)return(0,r.jsx)("div",{className:"flex justify-center items-center h-screen",children:(0,r.jsx)(h.A,{className:"animate-spin h-8 w-8 text-primary"})});if(!v)return(0,r.jsx)("div",{className:"p-8 text-center",children:"Assessment not found."});if(_)return(0,r.jsxs)("div",{className:"flex flex-col justify-center items-center h-screen p-4 text-center space-y-4 bg-muted/20",children:[(0,r.jsx)(b.A,{className:"h-16 w-16 text-green-500"}),(0,r.jsx)("h1",{className:"text-3xl font-bold",children:"Assessment Completed!"}),(0,r.jsx)("p",{className:"text-muted-foreground",children:"Thank you for your responses. Your results have been submitted."}),(0,r.jsx)(d.$,{onClick:()=>window.location.href="/dashboard",children:"Return to Dashboard"})]});let D=v.questions[T],O=(T+1)/v.questions.length*100;return(0,r.jsx)("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-950 p-4 md:p-8 flex justify-center items-start pt-12",children:(0,r.jsxs)("div",{className:"w-full max-w-2xl space-y-6",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("h1",{className:"text-xl font-semibold text-slate-900 dark:text-slate-100",children:v.title}),(0,r.jsx)(m.k,{value:O,className:"h-2"}),(0,r.jsxs)("p",{className:"text-xs text-right text-muted-foreground",children:["Question ",T+1," of ",v.questions.length]})]}),(0,r.jsxs)(o.Zp,{className:"min-h-[400px] flex flex-col shadow-lg border-slate-200 dark:border-slate-800",children:[(0,r.jsx)(o.aR,{children:(0,r.jsx)(o.ZB,{className:"text-lg leading-relaxed",children:D.text})}),(0,r.jsxs)(o.Wu,{className:"flex-1 space-y-6",children:["multiple-choice"===D.type&&(0,r.jsx)(c.z,{value:w[D.id]||"",onValueChange:e=>R(D.id,e),children:null==(e=D.options)?void 0:e.map((e,t)=>(0,r.jsxs)("div",{className:"flex items-center space-x-3 border p-4 rounded-lg cursor-pointer hover:bg-slate-50 dark:hover:bg-slate-900 transition-colors ".concat(w[D.id]===e?"border-primary bg-primary/5":"border-slate-200"),children:[(0,r.jsx)(c.C,{value:e,id:"".concat(D.id,"-").concat(t)}),(0,r.jsx)(u.J,{htmlFor:"".concat(D.id,"-").concat(t),className:"flex-1 cursor-pointer font-normal text-base",children:e})]},t))}),"true-false"===D.type&&(0,r.jsxs)(c.z,{value:w[D.id]||"",onValueChange:e=>R(D.id,e),children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3 border p-4 rounded-lg cursor-pointer",children:[(0,r.jsx)(c.C,{value:"true",id:"true"}),(0,r.jsx)(u.J,{htmlFor:"true",className:"flex-1 cursor-pointer",children:"True"})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-3 border p-4 rounded-lg cursor-pointer",children:[(0,r.jsx)(c.C,{value:"false",id:"false"}),(0,r.jsx)(u.J,{htmlFor:"false",className:"flex-1 cursor-pointer",children:"False"})]})]}),"short-answer"===D.type&&(0,r.jsx)(p.p,{placeholder:"Type your answer...",value:w[D.id]||"",onChange:e=>R(D.id,e.target.value),className:"h-12 text-lg"}),"essay"===D.type&&(0,r.jsx)(f.T,{placeholder:"Type your detailed response...",value:w[D.id]||"",onChange:e=>R(D.id,e.target.value),className:"min-h-[200px] text-base"}),"audio-response"===D.type&&(0,r.jsxs)("div",{className:"border-2 border-dashed rounded-xl p-8 flex flex-col items-center justify-center gap-4 bg-slate-50",children:[(0,r.jsx)(g.A,{className:"h-12 w-12 text-slate-400"}),(0,r.jsx)("p",{className:"text-sm text-muted-foreground",children:"Audio recording will be enabled in production"}),(0,r.jsx)(d.$,{variant:"outline",children:"Start Recording"})]})]}),(0,r.jsxs)(o.wL,{className:"flex justify-between border-t p-6 bg-slate-50/50 dark:bg-slate-900/50",children:[(0,r.jsx)(d.$,{variant:"ghost",onClick:()=>{T>0&&A(e=>e-1)},disabled:0===T,children:"Back"}),(0,r.jsxs)(d.$,{onClick:()=>{T<((null==v?void 0:v.questions.length)||0)-1?A(e=>e+1):E()},disabled:!w[D.id]&&D.required,children:[k&&(0,r.jsx)(h.A,{className:"mr-2 h-4 w-4 animate-spin"}),T===v.questions.length-1?k?"Submitting...":"Submit Assessment":"Next Question"]})]})]})]})})}},65142:(e,t,s)=>{"use strict";s.d(t,{p:()=>n});var r=s(95155),a=s(12115),i=s(64269);let n=a.forwardRef((e,t)=>{let{className:s,type:a,...n}=e;return(0,r.jsx)("input",{type:a,className:(0,i.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",s),ref:t,...n})});n.displayName="Input"},76444:(e,t,s)=>{"use strict";s.d(t,{J:()=>o});var r=s(95155),a=s(12115),i=s(10489),n=s(83101),l=s(64269);let d=(0,n.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),o=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)(i.b,{ref:t,className:(0,l.cn)(d(),s),...a})});o.displayName=i.b.displayName},80991:(e,t,s)=>{"use strict";s.d(t,{k:()=>l});var r=s(95155),a=s(12115),i=s(9484),n=s(64269);let l=a.forwardRef((e,t)=>{let{className:s,value:a,...l}=e;return(0,r.jsx)(i.bL,{ref:t,className:(0,n.cn)("relative h-4 w-full overflow-hidden rounded-full bg-secondary",s),...l,children:(0,r.jsx)(i.C1,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:"translateX(-".concat(100-(a||0),"%)")}})})});l.displayName=i.bL.displayName},86948:(e,t,s)=>{"use strict";s.d(t,{BT:()=>o,Wu:()=>c,ZB:()=>d,Zp:()=>n,aR:()=>l,wL:()=>u});var r=s(95155),a=s(12115),i=s(64269);let n=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,i.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",s),...a})});n.displayName="Card";let l=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,i.cn)("flex flex-col space-y-1.5 p-6",s),...a})});l.displayName="CardHeader";let d=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,i.cn)("text-2xl font-semibold leading-none tracking-tight",s),...a})});d.displayName="CardTitle";let o=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,i.cn)("text-sm text-muted-foreground",s),...a})});o.displayName="CardDescription";let c=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,i.cn)("p-6 pt-0",s),...a})});c.displayName="CardContent";let u=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,i.cn)("flex items-center p-6 pt-0",s),...a})});u.displayName="CardFooter"}},e=>{e.O(0,[2992,3644,830,5936,7590,6159,8441,1255,7358],()=>e(e.s=37885)),_N_E=e.O()}]);